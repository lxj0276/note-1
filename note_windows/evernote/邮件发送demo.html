<html>
<head>
  <title>邮件发送demo</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="2109"/>
<h1>邮件发送demo</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/7/24 3:42</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/7/24 3:45</i></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="font-size: 32px;">1、邮件发送入门1</span><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>import</b></span></font> <font face="Consolas"><span style="font-size:12pt">java.util.Properties;</span></font></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>import</b></span></font> <font face="Consolas"><span style="font-size:12pt">javax.mail.Message;</span></font></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>import</b></span></font> <font face="Consolas"><span style="font-size:12pt">javax.mail.Session;</span></font></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>import</b></span></font> <font face="Consolas"><span style="font-size:12pt">javax.mail.Transport;</span></font></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>import</b></span></font> <font face="Consolas"><span style="font-size:12pt">javax.mail.internet.InternetAddress;</span></font></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>import</b></span></font> <font face="Consolas"><span style="font-size:12pt">javax.mail.internet.MimeMessage;</span></font></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>class</b></span></font> <font face="Consolas"><span style="font-size:12pt">SendMailDemo1 {</span></font></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">main(String[] args)</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>throws</b></span></font> <font face="Consolas"><span style="font-size:12pt">Exception {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           Properties props =</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>new</b></span></font> <font face="Consolas"><span style="font-size:12pt">Properties();</span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//key=value</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           props.setProperty(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;mail.transport.protocol&quot;</span></font><font face="Consolas"><span style="font-size:12pt">,</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;smtp&quot;</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//JavaMail规范指定的</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           props.setProperty(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;mail.host&quot;</span></font><font face="Consolas"><span style="font-size:12pt">,</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;smtp.163.com&quot;</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//JavaMail规范指定的</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           props.setProperty(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;mail.smtp.auth&quot;</span></font><font face="Consolas"><span style="font-size:12pt">,</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;true&quot;</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//（需要身份认证，如果不认证，不能发送邮件）与具体的JavaMail的实现有关（此处用的SUN提供的参考实现）</span></font></div><div align="left"><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//         props.setProperty(&quot;mail.debug&quot;, &quot;true&quot;);//设置debug模式，可以看到发送细节</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           Session session = Session.</span> <span style="font-size:12pt"><i>getInstance</i></span><span style="font-size:12pt">(props);</span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//发邮件的一些环境</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           session.setDebug(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>true</b></span></font><font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           MimeMessage message =</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>new</b></span></font> <font face="Consolas"><span style="font-size:12pt">MimeMessage(session);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           message.setFrom(</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>new</b></span></font> <font face="Consolas"><span style="font-size:12pt">InternetAddress(</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;itheimacloud@163.com&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">));</span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//设置发件人</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           message.setRecipients(Message.RecipientType.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>TO</i></span></font><font face="Consolas"><span style="font-size:12pt">,</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;itheima14@163.com&quot;</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//设置收件人及发送的类型</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           message.setSubject(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;这是一封由JavaMail发送的邮件&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           message.setContent(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;hello&quot;</span></font><font face="Consolas"><span style="font-size:12pt">,</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;text/plain&quot;</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//邮件中的数据类型用的MIME类型</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           message.saveChanges();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//发送邮件</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           Transport ts = session.getTransport();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           ts.connect(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;itheimacloud&quot;</span></font><font face="Consolas"><span style="font-size:12pt">,</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;iamsorry&quot;</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           ts.sendMessage(message, message.getAllRecipients());</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">}</span></font></div></div>
</div></body></html> 