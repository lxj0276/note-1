<html>
<head>
  <title>DBUtil</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="2797"/>
<h1>DBUtil</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/8/3 10:00</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/8/3 10:05</i></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><a href="DBUtil_files/DBUtil.rar"><img src="DBUtil_files/9c65ed3b3e2754a611c6fc324bd75160.png" alt="DBUtil.rar"></a><br/><div><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><div align="left" style="font-size: 32px;"><font face="Consolas">开元数据源的使用</font></div><div align="left"><font face="Consolas"><span style="font-size: 21px;">1、DBCP</span></font></div><div align="left"><font face="Consolas"><span style="font-size: 21px;">   </span> <span style="font-size: 16px;"> </span></font><span style="font-family: 宋体; text-indent: 21pt; font-size: 16px;">a</span><font face="宋体" style="font-family: 宋体; text-indent: 21pt; font-size: 16px;">、需要的</font><font face="Times New Roman" style="text-indent: 21pt; font-size: 16px;">jar</font><font face="宋体" style="font-family: 宋体; text-indent: 21pt; font-size: 16px;">：</font><font face="Times New Roman" style="text-indent: 21pt; font-size: 16px;">commons-dbcp.jar  commons-pool.jar</font></div><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 16px;"><span style="font-family: 宋体;">     b<font face="宋体">、设置配置文件</font></span></p><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 16px;"><span style="font-family: 宋体;">     c<font face="宋体">、编写一个工具类</font></span></p><div align="left"><font face="Consolas"><span style="font-size: 32px;">     </span></font></div>
           <a href="DBUtil_files/DBCPUtil.java"><img src="DBUtil_files/60394d34b9afdcf44213c1f4dc5da21a.png" alt="DBCPUtil.java"></a></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;">           <a href="DBUtil_files/dbcpconfig.properties"><img src="DBUtil_files/37675351bc56fe6653bd9a21bf037784.png" alt="dbcpconfig.properties"></a></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;">           <a href="DBUtil_files/commons-dbcp-1.4.jar"><img src="DBUtil_files/b1eed70398fe265038f41a6fb025f48a.png" alt="commons-dbcp-1.4.jar"></a><a href="DBUtil_files/commons-pool-1.5.6.jar"><img src="DBUtil_files/cff77ade4047f679095147681ab84e7f.png" alt="commons-pool-1.5.6.jar"></a></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;">  <span style="font-size: 19px;">2、C3P0</span></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><span style="font-size: 19px;">     </span><span style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">a</span><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">、考</font><font face="Times New Roman" style="font-size: 10.5pt; text-indent: 21pt;">jar</font><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">包</font></blockquote><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 10.5pt; font-family: 宋体;">      b<font face="宋体">、写配置文件</font></span></p><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 10.5pt; font-family: 宋体;">      c<font face="宋体">、编写一个工具类</font></span></p><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><div><font face="Times New Roman"><span style="font-size: 14px;"><br/></span></font></div></blockquote>
                       <a href="DBUtil_files/C3P0Util.java"><img src="DBUtil_files/3588bfd80dcfd48f6f4ec3aa3b366dca.png" alt="C3P0Util.java"></a></div><div>                         <a href="DBUtil_files/c3p0-config.xml"><img src="DBUtil_files/22325751f13153e3417ac158c5ee896c.png" alt="c3p0-config.xml"></a></div><div>                         <a href="DBUtil_files/c3p0-0.9.1.2.jar"><img src="DBUtil_files/1273560c8a0fbbe3b169b9445fee26c0.png" alt="c3p0-0.9.1.2.jar"></a></div><div>     <br/>
       <span style="font-size: 19px;">   3、JNDI(tomcat服务器)</span></div><div>                   <span style="font-size: 16px;"> </span><span style="font-family: 宋体; text-indent: 21pt; font-size: 16px;">一般服务器都是通过</span><font face="Times New Roman" style="text-indent: 21pt; font-size: 16px;">JNDI</font><font face="宋体" style="font-family: 宋体; text-indent: 21pt; font-size: 16px;">存放数据源的。数据源的配置。</font><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 16px;"><span style="font-family: 宋体;"> </span></p><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 16px;"><font face="宋体">            </font><span style="font-family: 宋体; text-indent: 21pt;">3.1</span><font face="宋体" style="font-family: 宋体; text-indent: 21pt;">配置</font><font face="Times New Roman" style="text-indent: 21pt;">Tomcat</font><font face="宋体" style="font-family: 宋体; text-indent: 21pt;">管理的数据源</font></p><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 16px;"><font face="宋体">            </font><span style="font-family: 宋体; text-indent: 21pt;">a</span><font face="宋体" style="font-family: 宋体; text-indent: 21pt;">、把数据库驱动拷贝</font><font face="Times New Roman" style="text-indent: 21pt;">Tomcat\lib</font><font face="宋体" style="font-family: 宋体; text-indent: 21pt;">目录中</font></p><div><font face="宋体">                  </font><span style="font-family: 宋体; text-indent: 21pt;">b</span><font face="宋体" style="font-family: 宋体; text-indent: 21pt;">、在应用的</font><font face="Times New Roman" style="text-indent: 21pt;">META-INF</font><font face="宋体" style="font-family: 宋体; text-indent: 21pt;">目录下，建立一个名称为</font><font face="Times New Roman" style="text-indent: 21pt;">context.xml</font><font face="宋体" style="font-family: 宋体; text-indent: 21pt;">的配置文件，内容如下：</font></div><div><font face="宋体" style="text-indent: 21pt;">     </font></div><div>                                   <img src="DBUtil_files/Image.png" type="image/png" height="106" style="cursor: default;" width="554"/></div><div><br/></div><div>                              <span style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">c</span><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">、部署应用，启动</font><font face="Times New Roman" style="font-size: 10.5pt; text-indent: 21pt;">Tomcat</font><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">，服务器就会按照配置在</font><font face="Times New Roman" style="font-size: 10.5pt; text-indent: 21pt;">JNDI</font><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">容器中注册数据源的实例。</font></div><div><font face="宋体" style="text-indent: 21pt; font-size: 14px;">     </font><font face="宋体"><span style="font-size: 14px;">            </span></font><span style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">d</span><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">、获取数据源</font></div><p style="margin-left: 21pt; text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;"><font face="宋体"><span style="font-size: 14px;">          </span></font><span style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">利用</span><font face="Times New Roman" style="font-size: 10.5pt; text-indent: 21pt;">JNDI</font><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">的</font><font face="Times New Roman" style="font-size: 10.5pt; text-indent: 21pt;">API</font><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">（</font><font face="Times New Roman" style="font-size: 10.5pt; text-indent: 21pt;">JDK</font><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">：</font><font face="Times New Roman" style="font-size: 10.5pt; text-indent: 21pt;">javax.naming.*</font><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">）把数据源根据</font><font face="Times New Roman" style="font-size: 10.5pt; text-indent: 21pt;">path+name</font><font face="宋体" style="font-family: 宋体; font-size: 10.5pt; text-indent: 21pt;">查询出来。</font></p><p style="margin-bottom: 0pt; margin-top: 0pt;">                                    <img src="DBUtil_files/Image [1].png" type="image/png" height="106" style="cursor: default;" width="554"/></p><font face="宋体" style="font-size: 16px;">         查看tomcat主页管理中的JDBC DataSources,下边有讲怎么配置。</font></div><div><font face="宋体"><span style="font-size: 19px;">          </span></font><img src="DBUtil_files/Image [2].png" type="image/png" height="569" style="cursor: default;" width="535"/></div></div>
</div></body></html> 