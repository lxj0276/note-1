<html>
<head>
  <title>jAVA中静态初始化块、静态方法、初始化块和构造方法的理解</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="1490"/>
<h1>jAVA中静态初始化块、静态方法、初始化块和构造方法的理解</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/7/21 12:58</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/10/25 15:43</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.chinaunix.net/uid-29253311-id-3953220.html"><i>http://blog.chinaunix.net/uid-29253311-id-3953220.html</i></a></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div><span style="font-size:14px;"><br/></span></div><div><span style="font-size:14px;">在Java中,有两种初始化块:静态初始化块和非静态初始化块。它们都是定义在类中，用大括号{}括起来，静态代码块在大括号外还要加上static关键字。</span><br/><br/><span style="-evernote-highlight:true;font-size: 14px; background-color: rgb(255, 250, 165);">非静态初始化块：</span><br/><span style="font-size:14px;">作用：给对象进行初始化。对象一建立就运行<span>，且优先于</span>构造函数的运行。</span><br/><span style="font-size:14px;">与构造函数的区别：非静态初始化块给所有对象进行统一初始化，构造函数只给对应对象初始化。</span><br/><span style="font-size:14px;">应用：将所有构造函数共性的东西定义在构造代码块中。</span><br/><br/><span style="-evernote-highlight:true;font-size: 14px; background-color: rgb(255, 250, 165);">静态初始化块：</span><br/><span style="font-size:14px;">作用：给类进行初始化。随着类的加载而执行，且只执行一次</span><br/><span style="font-size:14px;">1）构造代码块用于初始化对象，每创建一个对象就会被执行一次；静态代码块用于初始化类，随着类的加载而执行，不管创建几个对象，都只执行一次。</span><br/><span style="font-size:14px;">2）静态代码块优先于构造代码块的执行</span><br/><span style="font-size:14px;">3）都定义在类中，一个带static关键字，一个不带static</span></div><div><span style="font-size: 14px;">4）</span><span style="font-size: 15px;">静态代码块里面的变量都是局部变量，只在本块内有效。 </span><span style="font-size: 14px;"><br/></span><br/><span style="font-size: 15px;">静态代码块是自动执行的; 静态方法是被调用的时候才执行的.  </span><br style="font-size: 15px;"/><span style="font-size: 15px;">作用:静态代码块可用来初始化一些项目最常用的变量或对象;静态方法可用作不创建对象也可能需要执行的代码. </span></div><div style="font-size: 15px;"> 有两种情况要定义为静态的：一种情形是只想用一个存储区域来保存一个特定的数据——无论要创建多少个对象，甚至根本不创建对象。另一种情形是我们需要一个特殊的方法，它没有与这个类的任何对象关联。</div><div><span style="-evernote-highlight:true;font-size: 15px; background-color: rgb(255, 250, 165);"><br/></span><span style="font-size:14px;"><span style="-evernote-highlight:true;background-color: rgb(255, 250, 165);">构造函数、非静态初始化块、静态代码块都是用于初始化，三者的执行顺序依次是：静态代码块&gt;构造代码块&gt;构造函数。</span><br/></span><span style="font-size:14px;">其实初始化块就是构造器的补充，初始化块是不能接收任何参数的，定义的一些所有对象共有的属性、方法等内容时就可以用初始化块初始化了。</span></div><p style="background-color: white;"><span style="font-size:14px;">静态初始化块的作用就是当</span><span style="font-size:14px;">JVM</span><span style="font-size:14px;">在装载类时，你想让它做一些事情，那么，就可以用静态初始化块。这几者的执行顺序是：</span></p><p style="background-color: white;"><span style="font-size:14px;">（</span><span style="font-size:14px;">JVM</span><span style="font-size:14px;">在装载类时）先装载类的静态成员，再执行静态初始化块（同样，当一个类有继承自某类时，则会先装载该父类，那么，父类的装载或执行顺序，也都如句子所述）。</span></p><div><span style="font-size:14px;">（在创建类的实例时）先执行实例初始化块，再执行构造方法；但对于一棵继承树中，会先调用父类的构造方法，那么其执行顺序也如此。</span></div><div><span style="font-size: 14px;"><br/></span></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>class</b></span></font> <font face="Consolas"><span style="font-size:12pt">Test {</span></font></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">main(String[] args) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           TestStatic ts1 =</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>new</b></span></font> <font face="Consolas"><span style="font-size:12pt">TestStatic();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           ts1.test();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;-------------------&quot;</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           TestStatic ts2 =</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>new</b></span></font> <font face="Consolas"><span style="font-size:12pt">TestStatic();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           ts2.test();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;-------------------&quot;</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           ts2.test();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font color="#010101" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">}</span></font></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>class</b></span></font> <font face="Consolas"><span style="font-size:12pt">TestStatic{</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">TestStatic(){</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;构造方法执行&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     {    </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;代码块执行&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>static</b></span></font> <font face="Consolas"><span style="font-size:12pt">{</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;非静态代码块执行&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">test(){</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;test方法执行&quot;</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">}</span></font></div><div><hr/>
打印结果为：</div><div align="left"><font face="Consolas"><span style="font-size:12pt">非静态代码块执行</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">代码块执行</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">构造方法执行</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">test方法执行</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">-------------------</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">代码块执行</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">构造方法执行</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">test方法执行</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">-------------------</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">test方法执行</span></font></div><div align="left"><hr/><img src="jAVA中静态初始化块、静态方法、初始化块和构造方法的理解_files/Image.png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></div></div>
</div></body></html> 