<html>
<head>
  <title>struts2基础1</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="2397"/>
<h1>struts2基础1</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/7/28 8:32</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/8/28 9:16</i></td></tr>
<tr><td><b>标签：</b></td><td><i>action类, sturts.xml配置, sturts2, 配置文件，及加载顺序, 执行过程，原理</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://www.xuebuyuan.com/1086858.html"><i>http://www.xuebuyuan.com/1086858.html</i></a></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div><span style="font-size: 32px;">一、struts概述</span></div><div><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">(1)Struts2<font face="宋体">是一个</font><font face="Times New Roman">M</font><font face="宋体">（模型</font><font face="Times New Roman">---</font><font face="宋体">域</font><font face="Times New Roman">--</font><font face="宋体">范围模型）</font><font face="Times New Roman">V</font><font face="宋体">（</font><font face="Times New Roman">View</font><font face="宋体">视图）</font><font face="Times New Roman">C</font><font face="宋体">（控制器）框架（模型</font><font face="Times New Roman">2</font><font face="宋体">）。框架都是一个半成品。提高开发效率。</font></span></p></div><div><span style="font-size: 32px;"><img src="struts2基础1_files/Image.png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></span></div><div><p style="margin-bottom:0pt; margin-top:0pt;"></p></div><div><span style="font-size: 32px;"><img src="struts2基础1_files/Image [1].png" type="image/png" height="549" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="1067"/><span style="font-size: 32px;"><br/></span></span></div><div style="font-size: 21px;"><b>(2)<span style="font-family: 宋体;">web</span><font face="宋体" style="font-family: 宋体;">开发主要干的工作：</font></b></div><p style="margin-left: 21pt; text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">获取请求参数</span></p><p style="margin-left: 21pt; text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">封装到<font face="Times New Roman">JavaBean</font></span></p><p style="margin-left: 21pt; text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">验证和转换</span></p><p style="margin-left: 21pt; text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">调用service代码存数据</span></p><p style="margin-left: 21pt; text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">转向某个页面展示结果</span></p><div style="font-size: 21px;"><font face="宋体"><b><br/></b></font></div><div style="font-size: 21px;"><b><font face="宋体">(3)</font>Strust2 核心功能</b></div><span style="font-size: 21px;">允许POJO（Plain Old Java Objects）对象作为Action;</span><br style="font-size: 21px;"/><span style="font-size: 21px;">Action的execute 方法不再与Servlet API耦合，更易测试;</span><br style="font-size: 21px;"/><span style="font-size: 21px;">支持更多视图技术（JSP、FreeMarker、Velocity）;</span><br style="font-size: 21px;"/><span style="font-size: 21px;">基于Spring AOP思想的拦截器机制，更易扩展;</span><br style="font-size: 21px;"/><span style="font-size: 21px;">更强大、更易用输入校验功能.</span><div><img src="struts2基础1_files/Image [2].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/><br style="font-size: 21px;"/><div><img src="struts2基础1_files/Image [3].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 32px;"><span style="font-family: 宋体;"><b>二、执行过程和原理</b></span></p></div><div><br/></div><div><img src="struts2基础1_files/Image [4].png" type="image/png" height="630" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="633"/></div><div><span style="font-size: 21px;">上图来源于Struts2官方站点，是Struts 2 的整体结构。 </span><br style="font-size: 21px;"/><b><font color="#E30000"><span style="font-size: 21px;">一个请求在Struts2框架中的处理大概分为以下几个步骤 </span><br style="font-size: 21px;"/><span style="font-size: 21px;">1 客户端初始化一个指向Servlet容器（例如Tomcat）的请求 </span><br style="font-size: 21px;"/><span style="font-size: 21px;">2 这个请求经过一系列的过滤器（Filter）（这些过滤器中有一个叫做ActionContextCleanUp的可选过滤器，这个过滤器对于Struts2和其他框架的集成很有帮助，例如：SiteMesh Plugin） </span><br style="font-size: 21px;"/><span style="font-size: 21px;">3 接着FilterDispatcher被调用，FilterDispatcher询问ActionMapper来决定这个请是否需要调用某个Action </span><br style="font-size: 21px;"/><span style="font-size: 21px;">4 如果ActionMapper决定需要调用某个Action，FilterDispatcher把请求的处理交给ActionProxy </span><br style="font-size: 21px;"/><span style="font-size: 21px;">5 ActionProxy通过Configuration Manager询问框架的配置文件，找到需要调用的Action类 </span><br style="font-size: 21px;"/><span style="font-size: 21px;">6 ActionProxy创建一个ActionInvocation的实例。 </span><br style="font-size: 21px;"/><span style="font-size: 21px;">7 ActionInvocation实例使用命名模式来调用，在调用Action的过程前后，涉及到相关拦截器（Intercepter）的调用。 </span><br style="font-size: 21px;"/><span style="font-size: 21px;">8 一旦Action执行完毕，ActionInvocation负责根据struts.xml中的配置找到对应的返回结果。返回结果通常是（但不总是，也可 能是另外的一个Action链）一个需要被表示的JSP或者FreeMarker的模版。在表示的过程中可以使用Struts2 框架中继承的标签。在这个过程中需要涉及到ActionMapper </span></font></b><p style="font-size: 21px;"><b><font color="#E30000">在上述过程中所有的对象（Action，Results，Interceptors，等）都是通过ObjectFactory来创建的。</font></b></p></div><div style="font-size: 32px;"><b>三、<span style="font-family: 宋体;">配置文件</span><font face="Times New Roman">struts.xml</font><font face="宋体" style="font-family: 宋体;">没有提示</font></b></div><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">a<font face="宋体">、方案一：联网</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">b<font face="宋体">、方案二：进行本地配置</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><img src="struts2基础1_files/Image [5].png" type="image/png" height="413" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="554"/><span style="mso-spacerun:&amp;apos;yes&amp;apos;; font-size:10.5000pt; font-family:&amp;apos;Times New Roman&amp;apos;;"> </span></p><div><br/></div><div style="font-size: 32px;"><b><font color="#FF0000">四、Struts2的配置文件的位置和加载顺序</font></b></div><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 21px;"><font color="#FF0000">一、default.properties：在struts2-core-**.jar包中的org.pache.struts2.default.properties中（框架本身用的）</font></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><font color="#FF0000"><span style="font-size: 21px;">     </span><span style="font-family: 宋体; text-indent: 21pt; font-size: 21px;">关于</span><font face="Times New Roman" style="text-indent: 21pt; font-size: 21px;">Struts2</font><font face="宋体" style="font-family: 宋体; text-indent: 21pt; font-size: 21px;">一些常量配置（框架内部）</font><span style="font-size: 21px;"><br/></span><span style="font-size: 21px;">二、struts-default.xml:在struts2-core-**.jar包中（框架本身用的）</span></font></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><font color="#FF0000"><span style="font-size: 21px;">     </span><span style="font-size: 21px;"> </span><span style="font-family: 宋体; text-indent: 21pt; font-size: 21px;">定义了一些</span><font face="Times New Roman" style="text-indent: 21pt; font-size: 21px;">bean</font><font face="宋体" style="font-family: 宋体; text-indent: 21pt; font-size: 21px;">；</font></font></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 21px;"><font color="#FF0000"><span style="font-family: 宋体; text-indent: 21pt;">定义了一个抽象的包：</span><font face="Times New Roman" style="text-indent: 21pt;">struts-default<br/></font></font></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 21px;"><span style="font-family: 宋体; text-indent: 21pt;"><font color="#FF0000">定义了一些结果视图</font></span></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 21px;"><span style="font-family: 宋体; text-indent: 21pt;"><font color="#FF0000">定义了一些拦截器和拦截器小组</font></span></blockquote></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><font color="#FF0000"><span style="font-size: 21px;">三、struts-plugin.xml:在struts2-**-plugin.jar包中（插件中，给插件用的）</span><br/><span style="font-size: 21px;">四、struts.xml:在你应用的构建路径中（程序员进行配置的地方。推荐）</span><br/><span style="font-size: 21px;">五、struts.properties:在你应用的构建路径中（程序员进行配置的地方）</span><br/><span style="font-size: 21px;">六、web.xml：此处也可以对struts2框架进行配置（不建议。只建议配置过滤器）</span><br/><span style="font-size: 21px;">重点：后面配置文件中的配置会覆盖掉前面的配置。</span></font></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><span style="font-size: 21px;"><br/></span></blockquote><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify; font-size: 21px;"><span style="font-family: 宋体;">比如：在<font face="Times New Roman">struts.xml</font><font face="宋体">中覆盖</font><font face="Times New Roman">default.properties</font><font face="宋体">中的内容，可以这么办：</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify; font-size: 21px;"><span style="color: rgb(0, 128, 128); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">&lt;</span><span style="color: rgb(63, 127, 127); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">constant</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;"> </span><span style="color: rgb(127, 0, 127); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">name</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;">=</span><span style="color: rgb(42, 0, 255); font-style: italic; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">&quot;struts.action.extension&quot;</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;"> </span><span style="color: rgb(127, 0, 127); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">value</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;">=</span><span style="color: rgb(42, 0, 255); font-style: italic; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">&quot;do&quot;</span><span style="color: rgb(0, 128, 128); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">&gt;&lt;/</span><span style="color: rgb(63, 127, 127); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">constant</span><span style="color: rgb(0, 128, 128); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">&gt;</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; text-align: justify; font-size: 21px;"><span style="font-family: 宋体;"> </span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">比如：在<font face="Times New Roman">web.xml</font><font face="宋体">中把访问的扩展名改为</font><font face="Times New Roman">itheima</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(0, 128, 128); font-family: Consolas;">&lt;</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">filter</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: Consolas;">  </span> <span style="color: rgb(0, 128, 128); font-family: Consolas;">&lt;</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">filter-name</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span><span style="font-family: Consolas;">struts2</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&lt;/</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">filter-name</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span></p><div><span style="font-family: Consolas;">  </span></div><div style="font-size: 21px;"><span style="color: rgb(0, 128, 128); font-family: Consolas;">  &lt;</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">filter-class</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span></div><div style="font-size: 21px;"><span style="font-family: Consolas;">      org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</span></div><div style="font-size: 21px;"><span style="color: rgb(0, 128, 128); font-family: Consolas;">  &lt;/</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">filter-class</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span></div><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: Consolas;">  </span> <span style="color: rgb(0, 128, 128); font-family: Consolas;">&lt;</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">init-param</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: Consolas;">  </span> <span style="color: rgb(0, 128, 128); font-family: Consolas;">&lt;</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">param-name</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span><span style="font-family: Consolas;">struts.action.extension</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&lt;/</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">param-name</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: Consolas;">  </span> <span style="color: rgb(0, 128, 128); font-family: Consolas;">&lt;</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">param-value</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span><span style="text-decoration: underline; font-family: Consolas;">itheima</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&lt;/</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">param-value</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: Consolas;">  </span> <span style="color: rgb(0, 128, 128); font-family: Consolas;">&lt;/</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">init-param</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: Consolas;"> </span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&lt;/</span><span style="color: rgb(63, 127, 127); font-family: Consolas;">filter</span><span style="color: rgb(0, 128, 128); font-family: Consolas;">&gt;</span></p></blockquote><div><br/></div><div style="font-size: 32px;"><b>五、<span style="font-family: 宋体;">struts.xml中的配置</span></b></div><div><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 24px;"><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">可以用include方式引入外部的<font face="Consolas">struts.xml</font><font face="宋体">配置文件（</font><font face="Consolas">xml</font><font face="宋体">声明和根元素一致）</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 24px;"><span style="color: rgb(0, 128, 128); background-color: rgb(255, 255, 255); font-family: Consolas;">&lt;</span><span style="color: rgb(63, 127, 127); background-color: rgb(255, 255, 255); font-family: Consolas;">include</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 127); background-color: rgb(255, 255, 255); font-family: Consolas;">file</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;">=</span><span style="color: rgb(42, 0, 255); font-style: italic; background-color: rgb(255, 255, 255); font-family: Consolas;">&quot;user.xml&quot;</span><span style="color: rgb(0, 128, 128); background-color: rgb(255, 255, 255); font-family: Consolas;">&gt;&lt;/</span><span style="color: rgb(63, 127, 127); background-color: rgb(255, 255, 255); font-family: Consolas;">include</span><span style="color: rgb(0, 128, 128); background-color: rgb(255, 255, 255); font-family: Consolas;">&gt;</span></p></div><div style="font-size: 21px;">1、<font face="Consolas" style="text-align: -webkit-left;"> 常量配置</font></div><div style="font-size: 21px;"><font color="#008080" face="Consolas" style="text-align: -webkit-left;"> &lt;</font><font color="#3F7F7F" face="Consolas" style="text-align: -webkit-left;">constant</font><span style="text-align: -webkit-left;"> </span><font color="#7F007F" face="Consolas" style="text-align: -webkit-left;">name</font><span style="text-align: -webkit-left;"> </span><font face="Consolas" style="text-align: -webkit-left;">=</font><font color="#2A00FF" face="Consolas" style="text-align: -webkit-left;"> <i>&quot;struts.devMode&quot;</i></font><font color="#010101" face="Consolas" style="text-align: -webkit-left;"> </font><font color="#7F007F" face="Consolas" style="text-align: -webkit-left;">value</font><font face="Consolas" style="text-align: -webkit-left;">=</font><font color="#2A00FF" face="Consolas" style="text-align: -webkit-left;"> <i>&quot;true&quot;</i></font><font color="#010101" face="Consolas" style="text-align: -webkit-left;"> </font><font color="#008080" face="Consolas" style="text-align: -webkit-left;">/&gt;</font></div><div style="font-size: 21px;"><span style="color: rgb(63, 95, 191); font-family: Consolas;">&lt;!-- struts2中的一个常量配置：如果为true，当配置文件改变后，框架会重新加载其中的内容而不需要重新启动</span><span style="color: rgb(63, 95, 191); font-family: Consolas;"><u>Tomcat</u></span> <span style="color: rgb(63, 95, 191); font-family: Consolas;">--&gt;</span></div><div><p style="font-size: 21px; text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt;"><span style="mso-spacerun:&amp;apos;yes&amp;apos;; font-size:10.5000pt; font-family:&amp;apos;宋体&amp;apos;;"> </span></p><div><span style="font-family: 宋体;">常用的常量：</span></div><div><a href="struts2基础1_files/default.properties"><img src="struts2基础1_files/82425f504f5650401611154bf9953ea8.png" alt="default.properties"></a></div><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(255, 0, 0); font-family: 宋体;">struts.action.extension=action,<font face="宋体">框架要处理的后缀名称。</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(255, 0, 0); font-family: 宋体;">struts.devMode = true <font face="宋体">开发着模式。实际运行时建议为</font><font face="Times New Roman">false</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(255, 0, 0); font-family: 宋体;">struts.i18n.encoding=UTF-8 <font face="宋体">框架默认使用的编码。请求参数和输入响应</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(255, 0, 0); font-family: 宋体;">struts.serve.static.browserCache=true <font face="宋体">静态资源要不要缓存。</font></span><span style="font-family: 宋体;">（<font face="Times New Roman">response.setHeader():Expires;Cache-Control;Progma</font><font face="宋体">）</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">struts.ui.theme=xhtml <font face="宋体">和显示结果有关，显示用的主题。</font><font face="Times New Roman">simple</font><font face="宋体">等</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">struts.objectFactory = spring <font face="宋体">指定实例化动作类的工厂（和</font><font face="Times New Roman">Spring</font><font face="宋体">集成时用）</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">struts.enable.DynamicMethodInvocation = false <font face="宋体">是否允许动态方法调用</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">struts.multipart.maxSize=2097152 <font face="宋体">文件上传时的大小限制</font></span></p></div><div align="left" style="font-size: 21px;"><font face="Consolas">    </font></div><div style="font-size: 19px;">2、  <span style="color: rgb(63, 95, 191); font-family: Consolas;"> package:作用：对应用中的动作进行模块化管理。就如同把类放在不同的包中是一样的。</span></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">                属性：</font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">                name:包名。要保持唯一</font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size: 19px;">                namespace:/ 。名称空间+动作名称==访问的URL。</span></font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">                extends:struts2中配置文件的信息可以继承的。开发时，自己的包一般情况下都要继承“struts-default”</font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">                abstract：抽象包。如同抽象类。没有任何action资源的包可以定义为抽象的。 </font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">                (有点难度) <u>namespace</u>:名称空间。默认值是&quot;&quot;</font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">                     http://域名/应用名称+namespace+动作名称.action</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">     </font><font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">package</font> <font color="#7F007F" face="Consolas">name</font> <font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;p1&quot;</i></font> <font color="#7F007F" face="Consolas">extends</font><font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;struts-default&quot;</i></font> <font color="#7F007F" face="Consolas">namespace</font><font face="Consolas">=</font> <font color="#2A00FF" face="Consolas"><i>&quot;/clouds10&quot;</i></font><font color="#008080" face="Consolas">&gt;</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">           </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">action</font> <font color="#7F007F" face="Consolas">name</font> <font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;hello&quot;</i></font> <font color="#7F007F" face="Consolas">class</font><font face="Consolas">=</font> <font color="#2A00FF" face="Consolas"><i>&quot;com.itheima.actions.HelloAction&quot;</i></font> <font color="#7F007F" face="Consolas">method</font> <font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;hello&quot;</i></font><font color="#008080" face="Consolas">&gt;</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">                </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">result</font> <font color="#7F007F" face="Consolas">name</font> <font face="Consolas">=</font><font color="#2A00FF" face="Consolas"><i>&quot;success&quot;</i></font> <font color="#7F007F" face="Consolas">type</font><font face="Consolas">=</font> <font color="#2A00FF" face="Consolas"><i>&quot;dispatcher&quot;</i></font><font color="#008080" face="Consolas">&gt;</font><font face="Consolas">/success.jsp</font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">result</font> <font color="#008080" face="Consolas">&gt;</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">           </font> <font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">action</font> <font color="#008080" face="Consolas">&gt;</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">     </font><font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">package</font> <font color="#008080" face="Consolas">&gt;</font></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size: 19px;">     </span></font><img src="struts2基础1_files/Image [6].png" type="image/png" height="598" style="cursor: default;" width="1041"/></div><div style="font-size: 19px;"><b>3、<span style="color: rgb(63, 95, 191); font-family: Consolas;">action:定义一个动作</span></b></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">  name：动作的名称。同一包中的name必须唯一</font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">  class:动作类的全名。可选的.默认值是：com.opensymphony.xwork2.ActionSupport（在struts-default.xml中有配置）</font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">  method:动作类中的动作方法。可选的.默认值是：execute（）的方法</font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size: 19px;">     </span></font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">     </font><font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">action</font> <font color="#7F007F" face="Consolas">name</font> <font face="Consolas">=</font><font color="#2A00FF" face="Consolas"> <i>&quot;hello&quot;</i></font><font color="#010101" face="Consolas"> </font><font color="#7F007F" face="Consolas">class</font><font face="Consolas">=</font> <font color="#2A00FF" face="Consolas"><i>&quot;com.itheima.actions.HelloAction&quot;</i></font> <font color="#7F007F" face="Consolas">method</font> <font face="Consolas">=</font><font color="#2A00FF" face="Consolas"> <i>&quot;hello&quot;</i></font><font color="#008080" face="Consolas">&gt;</font></div><div style="font-size: 19px;"><div align="left"><font face="Consolas">                </font> <font color="#008080" face="Consolas">&lt;</font><font color="#3F7F7F" face="Consolas">result</font> <font color="#7F007F" face="Consolas">name</font> <font face="Consolas">=</font><font color="#2A00FF" face="Consolas"> <i>&quot;success&quot;</i></font><font color="#010101" face="Consolas"> </font><font color="#7F007F" face="Consolas">type</font><font face="Consolas">=</font> <font color="#2A00FF" face="Consolas"><i>&quot;dispatcher&quot;</i></font><font color="#008080" face="Consolas"> &gt;</font><font face="Consolas">/success.jsp</font><font color="#008080" face="Consolas"> &lt;/</font><font color="#3F7F7F" face="Consolas">result</font> <font color="#008080" face="Consolas">&gt;</font></div><div align="left"><font face="Consolas">       </font> <font color="#008080" face="Consolas">&lt;/</font><font color="#3F7F7F" face="Consolas">action</font> <font color="#008080" face="Consolas">&gt;</font></div><div align="left"><p style="margin-bottom:0pt; margin-top:0pt;"><span style="font-size: 12pt; background-color: rgb(255, 255, 255); font-family: 宋体; background-position: initial initial; background-repeat: initial initial;">可以在自己的<font face="Consolas">package</font><font face="宋体">中通过以下标签，指定默认的动作类</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;apos;yes&amp;apos;; color:rgb(0,128,128); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;apos;Consolas&amp;apos;;">&lt;</span><span style="mso-spacerun:&amp;apos;yes&amp;apos;; color:rgb(63,127,127); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;apos;Consolas&amp;apos;;">default-class-ref</span><span style="mso-spacerun:&amp;apos;yes&amp;apos;; font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;apos;Consolas&amp;apos;;"> </span><span style="mso-spacerun:&amp;apos;yes&amp;apos;; color:rgb(127,0,127); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;apos;Consolas&amp;apos;;">class</span><span style="font-size: 12pt; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">=</span><span style="mso-spacerun:&amp;apos;yes&amp;apos;; color:rgb(42,0,255); font-style:italic; font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;apos;Consolas&amp;apos;;">&quot;com.itheima.action.HelloAction&quot;</span><span style="mso-spacerun:&amp;apos;yes&amp;apos;; color:rgb(0,128,128); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;apos;Consolas&amp;apos;;">&gt;&lt;/</span><span style="mso-spacerun:&amp;apos;yes&amp;apos;; color:rgb(63,127,127); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;apos;Consolas&amp;apos;;">default-class-ref</span><span style="mso-spacerun:&amp;apos;yes&amp;apos;; color:rgb(0,128,128); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;apos;Consolas&amp;apos;;">&gt;</span></p></div></div><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;">4、result(action)中结果视图</div><div style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">      </font><span style="color: rgb(63, 95, 191); font-family: Consolas;">&lt;action name=&quot;hello&quot;&gt;</span></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">                 result：结果视图。转向的页面</font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">                     name：字符串。对应的是动作方法的返回值。</font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">                     type:转向的类型。默认dispatcher，转发</font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">                &lt;result name=&quot;success&quot; type=&quot;dispatcher&quot;&gt;/success.jsp&lt;/result&gt;</font></div><div align="left" style="font-size: 19px;"><font color="#3F5FBF" face="Consolas">           &lt;/action&gt;</font></div><div><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 19px;"><img src="struts2基础1_files/Image [7].png" type="image/png" height="296" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="1188"/><span style="color: rgb(255, 0, 0); font-family: 宋体; font-size: small;">  </span></p></div><div>   <span style="font-size: 21px;">   </span> <span style="font-family: 宋体; font-size: 21px;">1chain<font face="宋体">：从一个动作</font></span><span style="color: rgb(255, 0, 0); font-family: 宋体; font-size: 21px;">转发</span><span style="font-family: 宋体; font-size: 21px;">到另外一个动作</span></div><blockquote style="margin: 0px 0px 0px 40px; border: none; padding: 0px;"><p style="font-size: 21px; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: 宋体;">2dispatcher<font face="宋体">：从一个动作转发到另外一个</font><font face="Times New Roman">JSP</font></span></p><p style="font-size: 21px; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: 宋体;">3redirect<font face="宋体">：从一个动作重定向到一个</font><font face="Times New Roman">JSP</font></span></p><p style="font-size: 21px; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: 宋体;">4redirectAction<font face="宋体">：从一个动作重定向到另外一个动作</font></span></p><p style="font-size: 21px; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: 宋体;">5plainText:<font face="宋体">以纯文本的形式显示</font><font face="Times New Roman">JSP</font></span></p><div style="font-size: 21px;"><span style="font-family: 宋体;">6stream<font face="宋体">：文件下载</font></span></div><div style="font-size: 21px;"><h3><br/></h3></div><h3 style="font-size: 22px;"><font size="3" style="font-size: 19px; font-weight: normal;">Struts2的视图转发类型总结:</font><a href="http://blog.163.com/zhangmihuo_2007/blog/static/2701107520138210512169/" style="font-family: 宋体; font-size: 21px;">http://blog.163.com/zhangmihuo_2007/blog/static/2701107520138210512169/</a></h3><div><a href="http://www.blogjava.net/wawlian/archive/2010/09/04/331037.html">Struts2中result配置中各种视图转发类型</a></div><div><br/></div></blockquote><div style="font-size: 24px;"><b>5.自定义结果视图</b></div><div><b><span style="font-size: 24px;">   </span> <span style="font-size: 21px;"> </span></b><span style="font-size: 21px;">步骤：</span></div><span style="font-size: 21px;">1、定义一个类，实现com.opensymphony.xwork2.Result接口</span></div><div><img src="struts2基础1_files/Image [8].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/><br/><div style="font-size: 21px;">2、在配置文件中定义结果类型</div><div style="font-size: 32px;"><img src="struts2基础1_files/Image [9].png" type="image/png" height="81" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="935"/></div><div style="font-size: 21px;">3、现在就可以在动作中使用该结果类型</div><div style="font-size: 32px;"><img src="struts2基础1_files/Image [10].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">小技巧：很多包中都要使用该结果视图怎么办？</span></p><p style="font-size: 32px; margin-bottom: 0pt; margin-top: 0pt;"><img src="struts2基础1_files/Image [11].png" type="image/png" height="60" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="554"/><span style="mso-spacerun:&amp;apos;yes&amp;apos;; font-size:10.5000pt; font-family:&amp;apos;Times New Roman&amp;apos;;"> </span></p><p style="font-size: 32px; margin-bottom: 0pt; margin-top: 0pt;"><img src="struts2基础1_files/Image [12].png" type="image/png" height="185" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="426"/></p></div><div style="font-size: 32px;"><b><br/></b></div><div style="font-size: 32px;"><b>六、Action动作类(一般用**Action结尾)</b></div><span style="font-size: 21px;">1、编写动作类的三种方式</span><br style="font-size: 21px;"/><span style="font-size: 21px;">a、动作类不实现、也不继承任何的接口和类。即动作类是一个非常普通的JavaBean。</span><br style="font-size: 21px;"/><span style="font-size: 21px;">public class HelloAction1{</span><br style="font-size: 21px;"/><br style="font-size: 21px;"/><span style="font-size: 21px;">}</span><br style="font-size: 21px;"/><span style="font-size: 21px;">b、动作类实现com.opensymphony.xwork2.Action接口。可以使用常量</span><br style="font-size: 21px;"/><span style="font-size: 21px;">Action接口：</span><br style="font-size: 21px;"/><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">public</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">static</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">final</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> String </span><span style="color: rgb(0, 0, 192); font-style: italic; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">SUCCESS</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> = </span><span style="color: rgb(42, 0, 255); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">&quot;success&quot;</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;">;</span><span style="background-color: rgb(255, 255, 255); font-family: 宋体;"> 成功时转向的视图</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">public</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">static</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">final</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> String </span><span style="color: rgb(0, 0, 192); font-style: italic; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">NONE</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> = </span><span style="color: rgb(42, 0, 255); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">&quot;none&quot;</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;">;</span><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">不转向的任何视图。下载</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">public</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">static</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">final</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> String </span><span style="color: rgb(0, 0, 192); font-style: italic; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">ERROR</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> = </span><span style="color: rgb(42, 0, 255); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">&quot;error&quot;</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;">;</span><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">转向错误视图</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">public</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">static</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">final</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> String </span><span style="color: rgb(0, 0, 192); font-style: italic; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">INPUT</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> = </span><span style="color: rgb(42, 0, 255); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">&quot;input&quot;</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;">;</span><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">转向输入视图。（回显：验证与转换）</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">public</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">static</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">final</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> String </span><span style="color: rgb(0, 0, 192); font-style: italic; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">LOGIN</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> = </span><span style="color: rgb(42, 0, 255); background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">&quot;login&quot;</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;">;</span><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">登录视图（用户没有登录）</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">public</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> String execute() </span><span style="color: rgb(127, 0, 85); font-weight: bold; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">throws</span><span style="background-color: rgb(255, 255, 255); font-family: Consolas;"> Exception;</span></p><font color="#E30000" style="font-size: 24px;"><b>c、继承com.opensymphony.xwork2.ActionSupport（默认的动作类，开发中建议）</b></font><br style="font-size: 21px;"/><span style="font-size: 21px;">定义了 表单域校验、错误信息设置和获得国际化信息相关一些方法</span><br style="font-size: 21px;"/><span style="font-size: 21px;">2、动作类中的动作方法:</span><span style="font-size: 21px;"><br/></span></div><div><span style="font-size: 21px;">要求：public String method(){}</span><br style="font-size: 21px;"/><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><span style="font-size: 21px;">a、必须是public的<br/></span><span style="font-size: 21px;">b、必须返回String类型的<br/></span><span style="font-size: 21px;">c、必须没有参数</span></blockquote><div style="font-size: 21px;">3、<span style="font-family: 宋体;">动作类的生命周期</span></div><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">动作类每次访问都会重新被实例化，是线程安全的。</span></p><div style="font-size: 21px;">4、动作类中动作方法的调用</div><div style="font-size: 21px;">     1、可以使用通配符</div><div align="left"><font face="Consolas"><span style="font-size:12pt"> </span></font><font face="Consolas" size="4">          </font><span style="font-size: 12pt; color: rgb(63, 95, 191); font-family: Consolas;">&lt;!-- 使用通配符：*</span></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">            {2}:匹配第2个星花的内容</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">            --&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">            </span></font> <font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">&lt;!-- http://localhost:8080/day26_02_struts2Action/customer/add_Customer.action</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">                第一个*： add</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">                第二个*：Customer</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">              --&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">&lt;!--</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">           &lt;action name=&quot;*_*&quot; class=&quot;com.itheima.actions.{2}Action&quot; method=&quot;{1}&quot;&gt;</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">                &lt;result name=&quot;success&quot; type=&quot;dispatcher&quot;&gt;/{1}{2}.</span><span style="font-size:12pt"><u>jsp</u></span><span style="font-size:12pt">&lt;/result&gt;</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">           &lt;/action&gt;</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">            --&gt;</span></font></div><div>     2、<span style="background-color: rgb(232, 242, 254); font-size: 12pt; color: rgb(63, 95, 191); font-family: Consolas;"> 动态方法调用：DMI</span></div><div><font color="#3F5FBF" face="Consolas" size="4">      </font><span style="font-size: 12pt; color: rgb(63, 95, 191); font-family: Consolas;">Struts2框架默认是禁止的。可以通过配置一个常量打开它：</span></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">           struts.enable.DynamicMethodInvocation=true</span></font></div><div>                  <span style="font-size: 12pt; font-family: Consolas;"> </span><span style="color: rgb(0, 128, 128); font-size: 12pt; font-family: Consolas;">&lt;</span><span style="color: rgb(63, 127, 127); font-size: 12pt; font-family: Consolas;">a</span><span style="font-size: 12pt; font-family: Consolas;"> </span><span style="color: rgb(127, 0, 127); font-size: 12pt; font-family: Consolas;">href</span><span style="font-size: 12pt; font-family: Consolas;">=</span><span style="color: rgb(42, 0, 255); font-style: italic; font-size: 12pt; font-family: Consolas;">&quot;</span><span style="font-size: 12pt; font-family: Consolas;">${pageContext.request.contextPath}</span><span style="color: rgb(42, 0, 255); font-style: italic; font-size: 12pt; font-family: Consolas;">/user/user2!add.action&quot;</span><span style="color: rgb(0, 128, 128); font-size: 12pt; font-family: Consolas;">&gt;</span><span style="font-size: 12pt; font-family: Consolas;">添加用户</span><span style="color: rgb(0, 128, 128); font-size: 12pt; font-family: Consolas;">&lt;/</span><span style="color: rgb(63, 127, 127); font-size: 12pt; font-family: Consolas;">a</span><span style="color: rgb(0, 128, 128); font-size: 12pt; font-family: Consolas;">&gt;&lt;</span><span style="color: rgb(63, 127, 127); font-size: 12pt; font-family: Consolas;">br</span><span style="color: rgb(0, 128, 128); font-size: 12pt; font-family: Consolas;">/&gt;</span></div><div><br/></div><div><span style="font-size: 12pt; font-family: Consolas;">   </span><font face="Consolas" size="4">     </font><span style="font-size: 12pt; font-family: Consolas;"> </span><span style="color: rgb(0, 128, 128); font-size: 12pt; font-family: Consolas;">&lt;</span><span style="color: rgb(63, 127, 127); font-size: 12pt; font-family: Consolas;">a</span><span style="font-size: 12pt; font-family: Consolas;"> </span><span style="color: rgb(127, 0, 127); font-size: 12pt; font-family: Consolas;">href</span><span style="font-size: 12pt; font-family: Consolas;">=</span><span style="color: rgb(42, 0, 255); font-style: italic; font-size: 12pt; font-family: Consolas;">&quot;</span><span style="font-size: 12pt; font-family: Consolas;">${pageContext.request.contextPath}</span><span style="color: rgb(42, 0, 255); font-style: italic; font-size: 12pt; font-family: Consolas;">/user/user2!edit.action&quot;</span><span style="color: rgb(0, 128, 128); font-size: 12pt; font-family: Consolas;">&gt;</span><span style="font-size: 12pt; font-family: Consolas;">修改用户</span><span style="color: rgb(0, 128, 128); font-size: 12pt; font-family: Consolas;">&lt;/</span><span style="color: rgb(63, 127, 127); font-size: 12pt; font-family: Consolas;">a</span><span style="color: rgb(0, 128, 128); font-size: 12pt; font-family: Consolas;">&gt;&lt;</span><span style="color: rgb(63, 127, 127); font-size: 12pt; font-family: Consolas;">br</span><span style="color: rgb(0, 128, 128); font-size: 12pt; font-family: Consolas;">/&gt;</span></div><div>    <span style="font-size: 21px;"> </span><span style="font-size: 19px;"> 3、访问默认的动作：找不到动作名称，找包中的默认的</span></div><div style="font-size: 19px;"><br/></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><span style="font-size: 19px;">&lt;package&gt;</span><br style="font-size: 19px;"/></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><span style="font-size: 19px;">&lt;default-action-ref name=&quot;error&quot;&gt;&lt;/default-action-ref&gt;</span></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><span style="font-size: 19px;">&lt;action name=&quot;error&quot;&gt;</span></blockquote></blockquote><span style="font-size: 19px;">                 &lt;result&gt;/error.jsp&lt;/result&gt;</span><br/><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"></blockquote><span style="font-size: 19px;">            &lt;/action&gt;            </span><br/><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div style="font-size: 19px;">&lt;/package&gt;</div><div style="font-size: 19px;"><div align="left"><font face="Consolas"><span style="font-size:12pt">       </span></font><font color="#3F5FBF" face="Consolas"><span style="font-size:12pt">&lt;!-- 指定默认的动作：当用户访问的动作在本包中没有找到时执行的动作 --&gt;</span></font></div></div></blockquote><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">           </span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">default-action-ref</span></font> <font color="#7F007F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">name</span></font><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt"><i>&quot;defaultAction&quot;</i></span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&gt;&lt;/</span></font><font color="#3F7F7F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">default-action-ref</span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&gt;</span></font><br/><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">           </span></font><font color="#3F5FBF" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&lt;!-- 指定默认的动作处理类 --&gt;</span></font><br/><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">            </span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">default-class-ref</span></font> <font color="#7F007F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">class</span></font><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt"><i>&quot;com.itheima.actions.DefaultAction&quot;</i></span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&gt;&lt;/</span></font><font color="#3F7F7F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">default-class-ref</span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&gt;</span></font><font face="Consolas" size="4"><br/></font><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">           </span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">action</span></font> <font color="#7F007F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">name</span></font><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt"><i>&quot;defaultAction&quot;</i></span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&gt;</span></font><br/><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">                </span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">result</span></font> <font color="#7F007F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">name</span></font><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt"><i>&quot;success&quot;</i></span></font> <font color="#7F007F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">type</span></font><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt"><i>&quot;dispatcher&quot;</i></span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&gt;</span></font><font face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">/whatareuwant.jsp</span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&lt;/</span></font><font color="#3F7F7F" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">result</span></font><font color="#008080" face="Consolas" style="font-size: 19px;"><span style="font-size:12pt">&gt;</span></font><br/><div align="left" style="font-size: 19px;"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;/</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">action</span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><h1 style="margin-bottom:0pt; margin-top:0pt;"><span style="font-size: 22pt; font-family: 宋体;">七、在动作类中访问<font face="Times New Roman">ServletAPI</font></span></h1><div style="font-size: 21px;"><font color="#3F7F5F" face="Consolas"> 1、</font><span style="background-color: rgb(255, 255, 255); color: rgb(0, 128, 128); font-family: 宋体; font-size: 12pt;">简单，推荐使用</span></div><div><font color="#3F7F5F" face="Consolas" size="4">    </font><span style="font-size: 12pt; color: rgb(63, 127, 95); font-family: Consolas;">//打印当前应用名称到控制台上</span></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//获取ServletAPI有关类的实例</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//方式一：（得到域对象）</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas" style="font-size: 19px;"><b>public</b></font> <font face="Consolas" style="font-size: 19px;">String execute()</font> <font color="#7F0055" face="Consolas" style="font-size: 19px;"><b>throws</b></font> <font face="Consolas" style="font-size: 19px;">Exception {</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">           </font> <font color="#3F7F5F" face="Consolas">//实际上利用ThreadLocal这个类</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">           </font> <font color="#3F7F5F" face="Consolas">//ServletActionContext：记住</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">          <font color="#E30000"> HttpServletRequest request = ServletActionContext.</font><font color="#E30000"><i>getRequest</i>();</font></font></div><div align="left" style="font-size: 19px;"><font face="Consolas">            <span style="background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">System</span>.</font><font color="#0000C0" face="Consolas"><i>out</i></font><font face="Consolas">.println(request.getContextPath());</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">           <font color="#FF0000">PageContext</font> <font color="#FF0000"><u>pc</u> = ServletActionContext.<i>getPageContext</i>();</font></font></div><div align="left" style="font-size: 19px;"><font face="Consolas">          <font color="#FF0000"> HttpServletResponse response = ServletActionContext.</font><font color="#FF0000"><i>getResponse</i>();</font></font></div><div align="left" style="font-size: 19px;"><font color="#FF0000" face="Consolas">           HttpSession <u>session</u> = request.getSession();</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">          response.getWriter().write(request.getContextPath());</font> <font color="#3F7F5F" face="Consolas">//自己输出</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">           ServletContext sc = ServletActionContext.<i>getServletContext</i>();</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">            <span style="background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">System</span>.</font><font color="#0000C0" face="Consolas"><i>out</i></font><font face="Consolas">.println(sc.getRealPath(</font> <font color="#2A00FF" face="Consolas">&quot;/&quot;</font><font face="Consolas">));</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">           </font> <font color="#7F0055" face="Consolas"><b>return</b></font> <font color="#0000C0" face="Consolas"><i>NONE</i></font><font face="Consolas">;</font></div><div align="left" style="font-size: 19px;"><font face="Consolas">     }</font></div><div><span style="font-size: 24px;">2、</span><span style="font-size: 12pt; color: rgb(63, 127, 95); font-family: Consolas;">//获取ServletAPI有关类实例的方式二（麻烦）（由拦截器来帮助实现）</span></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>class</b></span></font> <font face="Consolas"><span style="font-size:12pt"><u>ServletAPIAction2</u></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>extends</b></span></font> <font face="Consolas"><span style="font-size:12pt">ActionSupport</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>implements</b></span></font> <font face="Consolas"><span style="font-size:12pt">ServletRequestAware,ServletResponseAware{</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">HttpServletRequest</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">request</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">HttpServletResponse</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">response</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//该方法会在调用动作方法之前先执行：把当前的HttpServletRequest对象给你注入进来</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">setServletRequest(HttpServletRequest request) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>this</b></span></font><font face="Consolas"><span style="font-size:12pt">.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">request</span></font> <font face="Consolas"><span style="font-size:12pt">= request;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">setServletResponse(HttpServletResponse</span> <span style="font-size:12pt; background:#f0d8a8">response</span><span style="font-size:12pt">) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>this</b></span></font><font face="Consolas"><span style="font-size:12pt">.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">response</span></font> <font face="Consolas"><span style="font-size:12pt">=</span> <span style="font-size:12pt; background:#d4d4d4">response</span><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#646464" face="Consolas"><span style="font-size:12pt">@Override</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">String execute()</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>throws</b></span></font> <font face="Consolas"><span style="font-size:12pt">Exception{</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//要使用HttpServletRequest对象</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//System.out.println(request.getContextPath());</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">response</span></font><font face="Consolas"><span style="font-size:12pt">.getWriter().write(</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">request</span></font><font face="Consolas"><span style="font-size:12pt">.getContextPath());</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>NONE</i></span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">}</span></font></div><div align="left" style="font-size: 32px;"><font face="Consolas"><b>八、文件下载：</b></font></div><div align="left"><img src="struts2基础1_files/Image [13].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left"><img src="struts2基础1_files/Image [14].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><br/></div></div></div>
</div></body></html> 