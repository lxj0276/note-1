<html>
<head>
  <title>AJAX基础</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="1183"/>
<h1>AJAX基础</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/7/19 9:48</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/8/23 8:41</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="http://blog.csdn.net/fly_buf/article/details/6535259"><i>http://blog.csdn.net/fly_buf/article/details/6535259</i></a></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="font-size: 32px;"><b><font color="#41AD1C">一、AJAX简介</font></b></span><div style="font-size: 21px;">AJAX ：Asynchronous JavaScript And XML,是一种用于创建更好更快以及交互性更强的 Web 应用程序的技术，是基于JavaScript、XML、HTML、CSS新用法.</div><div><img src="AJAX基础_files/Image.png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><img src="AJAX基础_files/Image [1].png" type="image/png" height="588" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="883"/></div><div><br/></div><div style="font-size: 32px;"><font color="#41AD1C">二、同步异步：</font></div><div style="font-size: 21px;">同步：提交请求-&gt;等待服务器处理-&gt;处理完毕返回 这个期间客户端浏览器不能干任何事<br/>
异步: 请求通过事件触发-&gt;服务器处理（这是浏览器仍然可以作其他事情）-&gt;处理完毕 </div><div><img src="AJAX基础_files/Image [2].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><img src="AJAX基础_files/Image [3].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div style="font-size: 32px;"><img src="AJAX基础_files/Image [4].png" type="image/png" style="cursor: default;"/></div><div style="font-size: 32px;"><font color="#41AD1C">三、AJAX编码步骤</font></div><div><br/></div><div style="font-size: 24px;">1、创建XmlHttpRequest对象<br/>
2、注册状态监控回调函数<br/>
3、建立与服务器的异步连接<br/>
4、发出异步请求<br/></div><div align="left"><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&lt;</span></font><font color="#3F7F7F" face="Consolas" size="4"><span style="font-size:14pt; background:#d4d4d4">script</span></font> <font color="#7F007F" face="Consolas" size="4"><span style="font-size:14pt">type</span></font><font face="Consolas" size="4"><span style="font-size:14pt">=</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>&quot;text/javascript&quot;</i></span></font><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&gt;</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">          </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//点击b1时发出异步请求SerlvetDemo1，看看执行的结果</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">          window.onload=</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef"><b>function</b></span></font><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">(){</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">               document.getElementById(</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">&quot;b1&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">).onclick=</span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef"><b>function</b></span></font><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">(){</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                   </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//1、创建XmlHttpRequest对象（AJAX引擎）</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef"><b>                   var</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">xhr = getXmlHttpRequest();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                   </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//2、注册状态事件监听器（回馈结果）</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                   xhr.onreadystatechange=</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef"><b>function</b></span></font><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">(){</span></font><font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//异步请求结束后的回调函数</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef"><b>                        if</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">(xhr.readyState==4){</span></font><font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//异步请求执行完毕，拿到了结果</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef"><b>                             if</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">(xhr.status==200){</span></font><font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//服务器段执行成功</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                                  </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//alert(xhr.getAllResponseHeaders());</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                                  </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//alert(xhr.getResponseHeader('Server'));</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                                  alert(</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">&quot;服务器已经执行完毕，去控制台看看吧&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">);                           </span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                             }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                             </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//alert(xhr.status+&quot;:&quot;+xhr.statusText);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                        }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                   </span> <span style="font-size:14pt; background:#efefef"><u>}</u></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                   </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//3、建立与服务器的链接//</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size: 14pt; background-color: rgb(239, 239, 239); background-position: initial initial; background-repeat: initial initial;">time=&quot;</span></font> <font face="Consolas" size="4"><span style="font-size: 14pt; background-color: rgb(239, 239, 239); background-position: initial initial; background-repeat: initial initial;">+</span></font><font color="#7F0055" face="Consolas" size="4"> <span style="font-size: 14pt; background-color: rgb(239, 239, 239); background-position: initial initial; background-repeat: initial initial;"><b>new </b></span></font><font face="Consolas" size="4"><span style="font-size: 14pt; background-color: rgb(239, 239, 239); background-position: initial initial; background-repeat: initial initial;">Date().getTime())不让缓冲影响结果</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                   xhr.open(</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">&quot;GET&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">,</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">&quot;/day21_00_ajax/servlet/ServletDemo1?time=&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">+</span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef"><b>new</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">Date().getTime());</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                   </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//4、发出异步请求数据（POST）</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">                   xhr.send(</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef"><b>null</b></span></font><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">);</span></font><font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">//get方式没有请求正文</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">              </span> <span style="font-size:14pt; background:#efefef"><u>}</u></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">          </span> <span style="font-size:14pt; background:#efefef"><u>}</u></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">     </span></font> <font color="#008080" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">&lt;/</span></font><font color="#3F7F7F" face="Consolas" size="4"><span style="font-size:14pt; background:#d4d4d4">script</span></font><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt; background:#efefef">&gt;</span></font></div><div><br/></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>function</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">getXmlHttpRequest(){</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">   </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>var</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt; background:#d4d4d4">xmlHttp</span> <span style="font-size:14pt">;</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">   </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>try</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">{</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">       </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt">//</span> <span style="font-size:14pt"><u>Firefox</u></span> <span style="font-size:14pt">, Opera 8.0+,</span> <span style="font-size:14pt"><u>Safari</u></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">       </span> <span style="font-size:14pt; background:#d4d4d4">xmlHttp</span> <span style="font-size:14pt">=</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>new</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">XMLHttpRequest();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">    }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">   </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>catch</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">(e) {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">       </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt">// Internet Explorer</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">       </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>try</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">{</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">           </span> <span style="font-size:14pt; background:#d4d4d4">xmlHttp</span> <span style="font-size:14pt">=</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>new</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">ActiveXObject(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;Msxml2.XMLHTTP&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">        }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">       </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>catch</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">(e) {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">           </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>try</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">{</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">               </span> <span style="font-size:14pt; background:#d4d4d4">xmlHttp</span> <span style="font-size:14pt">=</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>new</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">ActiveXObject(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;Microsoft.XMLHTTP&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">            }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">           </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>catch</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">(e) {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">                alert(</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;您的浏览器不支持AJAX！&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">            }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">        }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">    }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>return</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt; background:#d4d4d4"><u>xmlHttp</u></span><span style="font-size:14pt">;</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">String.prototype.trim =</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>function</b></span></font><font face="Consolas" size="4"><span style="font-size:14pt">(){</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>return</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>this</b></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.replace(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">/(^\s*)(\s*$)/g</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">,</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt"><u>}</u></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt"><u><br/></u></span></font></div><div align="left" style="font-size: 32px;"><font color="#41AD1C"><font face="Consolas"><u>四、</u></font>XMLHttpRequest详解</font></div><div align="left" style="font-size: 24px;">1、XmlHttpRequest对象：<br/>
不同浏览器是不同的。<br/>
属性：<br/>
status：只读的。代表着服务器端返回的响应码（200）<br/>
statusText：只读的。代表着服务器端返回的响应码描述。<br/>
readyState：只读的。代表着当前AJAX引擎处于的状态<br/><br/>
0:代表XmlHttpRequest对象刚刚创建。<br/>
1：open已经调用（建立与服务器的链接），但是send（）还没有调用，还没有发出请求。<br/>
2：send方法已经被调用。请求对象已经给了服务器端，但是还没有响应。<br/>
3：能够取到响应消息头，但是取不到相应的正文<br/>
4：响应结束，可以取到所有响应的内容。<br/>
responseText：只读的。代表着服务器端返回的文本。<br/>
responseXML：只读的。代表着服务器端返回的是XML的文档（Document）。<br/>
方法：<br/>
abort()：终止异步请求。<br/>
getAllResponseHeaders()：得到所有的响应消息头和值。就是一个字符串。<br/>
getResponseHeader(headerName)：得到指定的响应消息头的值。返回一个字符串<br/>
open(String method,String url, boolean async):建立与服务器端的链接。async默认是true，异步请求。如果为false，就是同步请求。<br/>
send(“k1=v1&amp;k2=v2”)：向服务器端发送请求正文。get请求，传递null即可。<br/>
setRequestHeader(headerName,headerValue):向服务器端传递请求消息头。<br/><br/>
事件：<br/>
onreadystatechange：对应一个函数。回调函数。每一次的readyState的值发生变化，都会调用它指定的函数。</div><div align="left" style="font-size: 24px;"><img src="AJAX基础_files/Image [5].png" type="image/png" height="443" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="1061"/></div><div align="left" style="font-size: 32px;">五、AJAX - Send a Request To a Server</div><div align="left" style="font-size: 32px;"><br/></div><div align="left" style="font-size: 24px;">xmlhttp.open(&quot;GET&quot;,&quot;ajax_info.txt&quot;,true);</div><div align="left" style="font-size: 24px;">xmlhttp.send(); </div><div align="left" style="font-size: 32px;"><br/></div><div align="left" style="font-size: 32px;"><table><tbody><tr><th style="width: 30%; font-size: 21px;">Method</th><th style="font-size: 21px;">Description</th></tr><tr style="font-size: 21px;"><td>            open(<i>method,url,async</i>)</td><td>Specifies the type of request, the URL, and if the request should be handled asynchronously or not.<br/><br/><i>method</i>: the type of request: GET or POST<br/><i>url</i>: the location of the file on the server<br/><i>async</i>: true (asynchronous) or false (synchronous)</td></tr><tr><td style="font-size: 21px;">             send(<i>string</i>)</td><td style="font-size: 21px;">Sends the request off to the server.<br/><br/><i>string</i>: Only used for POST requests</td></tr></tbody></table></div><div><br/></div><div><h2 style="font-size: 31px;"><font size="3" style="font-size: 24px;">GET or POST?</font></h2><p style="font-size: 19px;">GET is simpler and faster than POST, and can be used in most cases.</p><p style="font-size: 19px;">However, always use POST requests when:</p><ul><li style="font-size: 19px;">A cached file is not an option (update a file or database on the server)</li><li style="font-size: 19px;">Sending a large amount of data to the server (POST has no size limitations)</li><li style="font-size: 19px;">Sending user input (which can contain unknown characters), POST is more robust and secure than GET</li></ul></div><div><img src="AJAX基础_files/Image [6].png" type="image/png" height="284" style="cursor: default;cursor: default;" width="1028"/></div><div><h1 style="font-size: 45px;"><font size="3" style="font-size: 32px;">六、AJAX - Server Response</font></h1></div><div><img src="AJAX基础_files/Image [7].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>、<img src="AJAX基础_files/Image [8].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><img src="AJAX基础_files/Image [9].png" type="image/png" height="370" style="cursor: default;cursor: default;cursor: default;cursor: default;" width="973"/></div><div style="font-size: 32px;">七、AJAX - The onreadystatechange Event</div><div style="font-size: 32px;"><img src="AJAX基础_files/Image [10].png" type="image/png" height="294" style="cursor: default;cursor: default;cursor: default;cursor: default;" width="999"/></div><div style="font-size: 32px;"><p><b>Note:</b> The onreadystatechange event is triggered five times (0-4), one time for each change in readyState.</p></div><div style="font-size: 32px;"><img src="AJAX基础_files/Image [11].png" type="image/png" height="224" style="cursor: default;cursor: default;cursor: default;cursor: default;" width="990"/></div><div style="font-size: 32px;"><img src="AJAX基础_files/Image [12].png" type="image/png" height="182" style="cursor: default;cursor: default;" width="993"/></div><div style="font-size: 21px;">&lt;!DOCTYPE html&gt;<br/>
&lt;html&gt;<br/>
&lt;head&gt;<br/>
&lt;script&gt;<br/>
var xmlhttp;<br/>
function loadXMLDoc(url,<span style="background-color:rgb(255, 250, 165);-evernote-highlight:true;">cfunc</span>)<br/>
{<br/></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div style="font-size: 21px;">if (window.XMLHttpRequest)</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div style="font-size: 21px;">  {// code for IE7+, Firefox, Chrome, Opera, Safari</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div style="font-size: 21px;">  xmlhttp=new XMLHttpRequest();</div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div style="font-size: 21px;">  }</div><div style="font-size: 21px;">else</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div style="font-size: 21px;">  {// code for IE6, IE5</div></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div style="font-size: 21px;">  xmlhttp=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div style="font-size: 21px;">  }</div><div style="font-size: 21px;"><font color="#E30000">xmlhttp.onreadystatechange=</font><span style="background-color:rgb(255, 250, 165);-evernote-highlight:true;">cfunc</span>;</div><div style="font-size: 21px;">xmlhttp.open(&quot;GET&quot;,url,true);</div><div style="font-size: 21px;">xmlhttp.send();</div></blockquote><div style="font-size: 21px;">}<br/>
function myFunction()<br/>
{<br/>
loadXMLDoc(&quot;ajax_info.txt&quot;,<span style="background-color:rgb(255, 250, 165);-evernote-highlight:true;">function()<br/>
  {<br/></span></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div style="font-size: 21px;"><span style="background-color:rgb(255, 250, 165);-evernote-highlight:true;">  if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200)</span></div><div style="font-size: 21px;"><span style="background-color:rgb(255, 250, 165);-evernote-highlight:true;">    {</span></div><div style="font-size: 21px;"><span style="background-color:rgb(255, 250, 165);-evernote-highlight:true;">          document.getElementById(&quot;myDiv&quot;).innerHTML=xmlhttp.responseText;</span></div><div style="font-size: 21px;"><span style="background-color:rgb(255, 250, 165);-evernote-highlight:true;">    }</span></div></blockquote><div style="font-size: 21px;"><span style="background-color:rgb(255, 250, 165);-evernote-highlight:true;">  }</span>);<br/>
}<br/>
&lt;/script&gt;<br/>
&lt;/head&gt;<br/>
&lt;body&gt;<br/><br/>
&lt;div id=&quot;myDiv&quot;&gt;&lt;h2&gt;Let AJAX change this text&lt;/h2&gt;&lt;/div&gt;<br/>
&lt;button type=&quot;button&quot; onclick=&quot;myFunction()&quot;&gt;Change Content&lt;/button&gt;<br/><br/>
&lt;/body&gt;<br/>
&lt;/html&gt;</div><div style="font-size: 32px;"><img src="AJAX基础_files/ScreenClip.png" type="image/png" height="367" style="cursor: default;cursor: default;cursor: default;" width="940"/></div></div>
</div></body></html> 