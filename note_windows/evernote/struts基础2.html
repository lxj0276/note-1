<html>
<head>
  <title>struts基础2</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="2467"/>
<h1>struts基础2</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/7/29 8:53</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/10/21 0:28</i></td></tr>
<tr><td><b>标签：</b></td><td><i>action, struts2, 国际化, 类型转换, 模型驱动, 数据校验</i></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><b><span style="font-size: 32px;">一、sturts2的Action中接收请求参数的方式：</span><span style="font-size: 21px;">（</span></b><span style="font-size: 21px;">封装请求参数的四种类型：JavaBean、数组、集合、map</span><b style="font-size: 21px;">）</b><div style="font-size: 21px;"><span style="font-family: 宋体;"><font color="#E30000">方式一：在动作类中成员变量给予初始值</font></span></div><div style="font-size: 21px;"><img src="struts基础2_files/Image.png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div style="font-size: 21px;"><div><span style="font-family: 宋体;"><font color="#E30000">方式二：在配置文件中注入动作类的参数值（静态参数设置）</font></span></div><div><img src="struts基础2_files/Image [1].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div></div><div><br/></div><div><h2 style="margin-bottom:0pt; margin-top:0pt;"><font color="#FF0000"><span style="font-size: 16pt; font-family: 黑体;">方式三、</span><font size="3" style="font-size: 21px;">（重点）：动态参数的注入(表单请求参数)</font></font></h2><h2 style="margin-bottom:0pt; margin-top:0pt;"><span style="font-size: 21px;">形式1：</span><span style="font-size: 16pt; font-family: 黑体;"><font face="Arial">Action </font><font face="黑体">本身作为</font><font face="Arial">model</font><font face="黑体">对象，通过成员</font><font face="Arial">setter</font><font face="黑体">封装（一个名字为</font><font face="Arial">params</font><font face="黑体">的拦截器干的）</font></span></h2><div><span style="font-size: 21px;">用动作类封装数据：定义字段名，提供setter方法，setter属性和表单的输入域的name保持一致</span></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>class</b></span></font> <font face="Consolas"><span style="font-size:12pt"><u>ParamAction1</u></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>extends</b></span></font> <font face="Consolas"><span style="font-size:12pt">ActionSupport {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">String</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">username</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">String</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">password</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">setUsername(String username) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>this</b></span></font><font face="Consolas"><span style="font-size:12pt">.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">username</span></font> <font face="Consolas"><span style="font-size:12pt">= username;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">setPassword(String password) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>this</b></span></font><font face="Consolas"><span style="font-size:12pt">.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">password</span></font> <font face="Consolas"><span style="font-size:12pt">= password;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt; background:#d4d4d4">String</span> <span style="font-size:12pt">execute()</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>throws</b></span></font> <font face="Consolas"><span style="font-size:12pt">Exception {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;username=&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">+</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">username</span></font> <font face="Consolas"><span style="font-size:12pt">+</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;, psssword=&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">+</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">password</span></font><span style="font-size: 12pt; font-family: Consolas;">);</span></div><div align="left"><font face="Consolas" size="4">          </font><span style="background-color: rgb(232, 242, 254); font-size: 12pt; color: rgb(63, 127, 95); font-family: Consolas;">//调用service方法来保存对象：save(this)</span></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt; background:#d4d4d4"><b>return</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt; background:#d4d4d4"><i>SUCCESS</i></span></font><font face="Consolas"><span style="font-size:12pt; background:#d4d4d4">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">}</span></font></div><div><h2 style="margin-bottom:0pt; margin-top:0pt;"><span style="font-size: 16pt; font-family: 黑体;">形式二：动作类和模型分开</span></h2></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>class</b></span></font> <font face="Consolas"><span style="font-size:12pt"><u>Student</u></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>implements</b></span></font> <font face="Consolas"><span style="font-size:12pt">Serializable {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">String</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">name</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>int</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">age</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas" size="4">     getter,setter.....</font></div><div>}</div><div><br/></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>class</b></span></font> <font face="Consolas"><span style="font-size:12pt"><u>StudentAction</u></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>extends</b></span></font> <font face="Consolas"><span style="font-size:12pt">ActionSupport {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">Student</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">student</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>new</b></span></font> <font face="Consolas"><span style="font-size:12pt">Student();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">Student getStudent() {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;调用了getStudent方法&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">student</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">setStudent(Student student) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;调用了setStudent方法&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>this</b></span></font><font face="Consolas"><span style="font-size:12pt">.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">student</span></font> <font face="Consolas"><span style="font-size:12pt">= student;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">String execute()</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>throws</b></span></font> <font face="Consolas"><span style="font-size:12pt">Exception {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">student</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt; background:#d4d4d4"><i>SUCCESS</i></span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">}</span></font></div><div><br/></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">action</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;saveStudent&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.itheima.actions.StudentAction&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">result</span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font><font face="Consolas"><span style="font-size:12pt">/result.jsp</span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;/</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">result</span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;/</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">action</span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><div><br/></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt; background:#d4d4d4">validators</span></font><font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><img src="struts基础2_files/Image [2].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left"><p style="text-indent:21.0000pt; margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">执行的过程：</span></p><p style="text-indent:21.0000pt; margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">框架调用</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">StudentAction<font face="宋体">的</font><font face="Times New Roman">getStudent()</font><font face="宋体">方法，得到返回值为</font><font face="Times New Roman">null</font></span></p><p style="text-indent:21.0000pt; margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">框架创建了一个<font face="Times New Roman">Student</font><font face="宋体">的实例，通过调用</font><font face="Times New Roman">setStudent(Student s)</font><font face="宋体">，传递对象</font></span></p><p style="text-indent:21.0000pt; margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">框架再调用<font face="Times New Roman">StudentAction</font><font face="宋体">的</font><font face="Times New Roman">getStudent()</font><font face="宋体">方法，得到刚刚创建的对象</font></span></p><p style="text-indent:21.0000pt; margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">紧着着，调用<font face="Times New Roman">student</font><font face="宋体">实例的</font><font face="Times New Roman">setName</font><font face="宋体">和</font><font face="Times New Roman">setAge</font><font face="宋体">方法，设置值。</font></span></p></div><div align="left"><font face="Consolas" size="4"><br/></font></div><h2 style="margin-bottom: 0pt; margin-top: 0pt; font-size: 31px;"><font size="3" style="font-size: 24px;"><span style="font-family: Consolas; text-align: -webkit-left;">形式三:</span><span style="font-family: 黑体;">模型驱动</span><span style="font-family: 黑体;">(<font face="黑体">面试</font><font face="Arial">):</font></span></font><span style="font-family: 宋体; font-size: 10.5pt;">动作类和模型分开。与</span><font face="Times New Roman" style="font-size: 10.5pt;">ValueStack</font><font face="宋体" style="font-family: 宋体; font-size: 10.5pt;">值栈有关</font></h2><div align="left"><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>class</b></span></font> <font face="Consolas"><span style="font-size:12pt"><u>Customer</u></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>implements</b></span></font> <font face="Consolas"><span style="font-size:12pt">Serializable {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">String</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">name</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">String</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">city</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">String getName() {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">name</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">setName(String name) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>this</b></span></font><font face="Consolas"><span style="font-size:12pt">.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">= name;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">String getCity() {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">city</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">setCity(String city) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>this</b></span></font><font face="Consolas"><span style="font-size:12pt">.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">city</span></font> <font face="Consolas"><span style="font-size:12pt">= city;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">String toString() {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;Customer [name=&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">+</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">+</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;, city=&quot;</span></font> <font face="Consolas"><span style="font-size:12pt">+</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">city</span></font> <font face="Consolas"><span style="font-size:12pt">+</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;]&quot;</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">}</span></font></div></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><img src="struts基础2_files/Image [3].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><img src="struts基础2_files/Image [4].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></div><div align="left"><br/></div><div align="left"><img src="struts基础2_files/Image [5].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left"><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">注：模型驱动实际上是由一个拦截器来做的。</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(42,0,255); font-style:italic; font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">modelDriven</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(42,0,255); font-style:italic; font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;宋体&amp;amp;apos;;">拦截器来做。把</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(42,0,255); font-style:italic; font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;宋体&amp;amp;apos;;">getModel<font face="宋体">方法返回的对象，压入一个叫做</font><font face="Consolas">ValueStack</font><font face="宋体">的栈顶。</font><font face="Consolas">struts</font><font face="宋体">框架就会根据表单的</font><font face="Consolas">name</font><font face="宋体">属性，调用对应栈顶对象的</font><font face="Consolas">setter</font><font face="宋体">方法，从而把请求参数封装进来。</font></span></p></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><font face="Consolas"><span style="font-size: 12pt;">4.封装数据到集合中<font color="#008080">：</font></span></font></div><div align="left"><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>class</b></span></font> <font face="Consolas"><span style="font-size:12pt"><u>CollectionAction</u></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>extends</b></span></font> <font face="Consolas"><span style="font-size:12pt">ActionSupport {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">Collection&lt;String&gt;</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">hobbies</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">Collection&lt;String&gt; getHobbies() {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">hobbies</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">setHobbies(Collection&lt;String&gt; hobbies) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>this</b></span></font><font face="Consolas"><span style="font-size:12pt">.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">hobbies</span></font> <font face="Consolas"><span style="font-size:12pt">= hobbies;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#646464" face="Consolas"><span style="font-size:12pt">@Override</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">String execute()</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>throws</b></span></font> <font face="Consolas"><span style="font-size:12pt">Exception {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">hobbies</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>super</b></span></font><font face="Consolas"><span style="font-size:12pt">.execute();</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">}</span></font></div></div><div align="left"><font color="#008080" face="Consolas" size="4"><br/></font></div><div align="left"><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">action</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;collection&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.itheima.form.CollectionAction&quot;</i></span></font><font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">      </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">result</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;success&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">type</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;dispatcher&quot;</i></span></font><font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font><font face="Consolas"><span style="font-size:12pt">/success.jsp</span></font><font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;/</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">result</span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><div align="left"> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;/</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">action</span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt; background:#d4d4d4">form</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">action</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;</i></span></font><font face="Consolas"><span style="font-size:12pt">${pageContext.request.contextPath}</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>/collection&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">method</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;post&quot;</i></span></font><font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">       </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">input</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">type</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;checkbox&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;hobbies&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">value</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;吃饭&quot;</i></span></font><font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font><font face="Consolas"><span style="font-size:12pt">吃饭</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">       </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">input</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">type</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;checkbox&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;hobbies&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">value</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;睡觉&quot;</i></span></font><font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font><font face="Consolas"><span style="font-size:12pt">睡觉</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">       </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">input</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">type</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;checkbox&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;hobbies&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">value</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;学&quot;</i></span></font><font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font><font face="Consolas"><span style="font-size:12pt">学</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">       </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">input</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">type</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;submit&quot;</i></span></font><font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;/</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt; background:#d4d4d4">form</span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt"><br/></span></font></div></div><div align="left"><div><span style="font-family: Consolas; font-size: 16px;">5.封装数据到Map中：</span></div><div align="left"><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>class</b></span></font> <font face="Consolas"><span style="font-size:12pt"><u>CollectionAction</u></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>extends</b></span></font> <font face="Consolas"><span style="font-size:12pt">ActionSupport {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">Collection&lt;Employee&gt;</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">employees</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>private</b></span></font> <font face="Consolas"><span style="font-size:12pt">Map&lt;String, Employee&gt;</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">emps</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">Collection&lt;Employee&gt; getEmployees() {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">employees</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">setEmployees(Collection&lt;Employee&gt; employees) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>this</b></span></font><font face="Consolas"><span style="font-size:12pt">.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">employees</span></font> <font face="Consolas"><span style="font-size:12pt">= employees;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">Map&lt;String, Employee&gt; getEmps() {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">emps</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">setEmps(Map&lt;String, Employee&gt; emps) {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>this</b></span></font><font face="Consolas"><span style="font-size:12pt">.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">emps</span></font> <font face="Consolas"><span style="font-size:12pt">= emps;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font face="Consolas"><span style="font-size:12pt">String execute()</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>throws</b></span></font> <font face="Consolas"><span style="font-size:12pt">Exception {</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>if</b></span></font><font face="Consolas"><span style="font-size:12pt">(</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt">emps</span></font><font face="Consolas"><span style="font-size:12pt">!=</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>null</b></span></font><font face="Consolas"><span style="font-size:12pt">){</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>for</b></span></font><font face="Consolas"><span style="font-size:12pt">(Map.Entry&lt;String, Employee&gt; me:</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">emps</span></font><font face="Consolas"><span style="font-size:12pt">.entrySet()){</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                     System.</span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(me.getKey()+</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;:&quot;</span></font><font face="Consolas"><span style="font-size:12pt">+me.getValue());</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">                }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">           </span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>NONE</i></span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">}</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">action</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;collectionAction2&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.itheima.actions.CollectionAction&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">action</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;collectionAction3&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.itheima.actions.CollectionAction&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><img src="struts基础2_files/Image [6].png" type="image/png" height="272" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="1079"/></div><div align="left"><br/></div><div align="left"><hr/><hr/></div><div align="left" style="font-size: 32px;"><b>二、类型转换：</b></div><div align="left"><b style="font-size: 21px;">1、用户界面传来的数据都是String：String----&gt;其他类型</b><br/><span style="font-size: 19px;">显示或者是数据回显：其他类型-----&gt;String</span><br style="font-size: 19px;"/><br style="font-size: 19px;"/><span style="font-size: 19px;">基本类型自动转换。</span><br style="font-size: 19px;"/><span style="font-size: 19px;">java.util.Date&lt;--------&gt;String(中国：Struts2默认按照yyyy-MM-dd本地格式进行自动转换)</span><br style="font-size: 19px;"/><span style="font-size: 19px;">数组  可以将多个同名参数，转换到数组中</span></div><div align="left"><span style="font-size: 21px;"><b><br/></b></span></div><div align="left"><b style="font-size: 21px;">2、自定义类型转换器</b><br/><span style="font-size: 19px;">String-----------------&gt;java.util.Date      MM/dd/yyyy-----&gt;能转换</span><br style="font-size: 19px;"/><span style="font-size: 19px;">java.util.Date---------&gt;String                 MM/dd/yyyy</span><br style="font-size: 19px;"/><br style="font-size: 19px;"/><span style="font-size: 19px;">步骤：</span><br style="font-size: 19px;"/><span style="font-size: 19px;">第一步：</span><br style="font-size: 19px;"/></div></div></div></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div align="left"><div align="left"><div align="left"><span style="font-size: 19px;">编写一个类直接或间接实现</span></div></div></div><div align="left"><div align="left"><div align="left"><span style="font-size: 19px;">com.opensymphony.xwork2.conversion.TypeConverter接口。</span></div></div></div><div align="left"><div align="left"><div align="left"><span style="font-size: 19px;">一般选择继承</span></div></div></div><div align="left"><div align="left"><div align="left"><span style="font-size: 19px;">com.opensymphony.xwork2.conversion.impl.DefaultTypeConverter</span></div></div></div><div align="left"><div align="left"><div align="left"><span style="font-size: 19px;">覆盖掉</span><span style="font-size: 19px;">public Object convertValue(Object value, Class toType) </span></div><div align="left"><img src="struts基础2_files/Image [7].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></div></div></div><div align="left"><div align="left"><div align="left" style="font-size: 19px;"><font color="#E30000">继承org.apache.struts2.util.StrutsTypeConverter(最简单的方便)</font></div><div align="left" style="font-size: 19px;"><img src="struts基础2_files/Image [8].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left" style="font-size: 19px;"><br/></div><div align="left" style="font-size: 19px;"><b>第二步：注册类型转换器</b></div><div align="left" style="font-size: 19px;">局部类型转换器：为某个动作类服务的（特服）<br/>
在动作类所在的包中，建立一个名称为“动作类名-conversion.properties”的配置文件<br/><img src="struts基础2_files/Image [9].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/><br/><br/>
全局类型转换器：为所有的动作类服务的<br/>
在WEB-INF\classes目录下（也即src目录下）建立一个固定名称的配置文件：xwork-conversion.properties</div><div align="left" style="font-size: 19px;"><img src="struts基础2_files/Image [10].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left"><h2 style="font-size: 19px; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 16pt; font-family: 黑体;">3<font face="黑体">、出现转换失败时的页面转向和错误消息提示</font></span></h2><div style="font-size: 19px;"><br/></div><div style="font-size: 19px;"><b><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">a<font face="宋体">、配置一个</font><font face="Times New Roman">name=</font></span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;Times New Roman&amp;amp;apos;;">”</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">input</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;Times New Roman&amp;amp;apos;;">”</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">的结果视图，一般指向用户输入数据的那个页面（转换失败，由ｃｏｎｖｅｒｓｉｏｎＥｒｒｏｒ拦截）</span></b></div><div><img src="struts基础2_files/Image [11].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/><span style="font-family: 宋体; font-size: 14px;">    </span></div><div style="font-size: 19px;"><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">b、在<font face="Times New Roman">01.jsp</font><font face="宋体">中使用</font><font face="Times New Roman">struts2</font><font face="宋体">的标签显示字段有关的错误（后面的国际化再讲）</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(191,95,63); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">&lt;%@</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;"> </span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(63,127,127); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">taglib</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;"> </span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(127,0,127); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">uri</span><span style="font-size: 12pt; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">=</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(42,0,255); font-style:italic; font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">&quot;/struts-tags&quot;</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;"> </span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(127,0,127); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">prefix</span><span style="font-size: 12pt; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;">=</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(42,0,255); font-style:italic; font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">&quot;s&quot;</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(191,95,63); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">%&gt;</span></p><div><span style="font-size: 12pt; background-color: rgb(255, 255, 255); font-family: Consolas; background-position: initial initial; background-repeat: initial initial;"> </span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(0,128,128); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">&lt;</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(63,127,127); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">s:fielderror</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(0,128,128); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;">/&gt;</span></div><div><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(0,128,128); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;Consolas&amp;amp;apos;;"><span style="font-size: 12pt;">&lt;</span><span style="color: rgb(63, 127, 127); font-size: 12pt;">s:actionerror</span><span style="font-size: 12pt;">/&gt;</span></span></div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(0,128,128); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;宋体&amp;amp;apos;;"><b>c<font face="宋体">、配置提示信息为中文的</font></b></span></p><div><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(0,128,128); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;宋体&amp;amp;apos;;"><b>在动作类所在的包中，建立一个名称为：动作类名<font face="Consolas">.properties</font><font face="宋体">的配置文件</font></b></span></div><div><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(0,128,128); font-size:12.0000pt; background:rgb(255,255,255); mso-highlight:rgb(255,255,255); font-family:&amp;amp;apos;宋体&amp;amp;apos;;"><b><font face="宋体">写法：key:invalid.fieldvalue.字段=错误提示</font></b></span></div></div><img src="struts基础2_files/Image [12].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div></div></div></blockquote><div align="left"><div align="left"><div align="left"><hr/><hr/><h1 style="margin-bottom:0pt; margin-top:0pt;"><span style="font-size: 22pt; font-family: 宋体;">三、用户输入数据的校验</span></h1><div><h2 style="margin-bottom:0pt; margin-top:0pt;"><span style="font-size: 16pt; font-family: 黑体;">1<font face="黑体">、校验方式：</font></span></h2><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 19px;"><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">a<font face="宋体">：客户端校验。（防君子不防小人）在页面中写</font><font face="Consolas">js</font><font face="宋体">脚本。</font></span></p><p style="margin-left: 21pt; text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 19px;"><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">输入错误的话提醒比较及时；</span></p><p style="margin-left: 21pt; text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 19px;"><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">减轻服务器的压力</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 19px;"><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">b<font face="宋体">、服务器端校验。</font></span></p><p style="margin-left: 21pt; text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 19px;"><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">数据安全</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 19px;"><span style="background-color: rgb(255, 255, 255); font-family: 宋体;"> </span></p><div style="font-size: 19px;"><span style="background-color: rgb(255, 255, 255); font-family: 宋体;">开发中：<font face="Consolas">a+b</font></span></div></div><div style="font-size: 19px;"><hr/></div><div><span style="font-size: 21px;"><b>2、服务器端校验：</b></span><br/><span style="font-size: 19px;"><u>编程式校验：自己编写一个校验代码（缺点：验证规则都写在了代码中）</u></span><br/><br/><span style="font-size: 19px;">前提：动作类继承ActionSupport。</span></div><div><span style="background-color: rgb(255, 255, 255); font-family: 宋体; font-size: 12pt; text-indent: 21pt;">1</span><font face="宋体" style="font-family: 宋体; font-size: 12pt; text-indent: 21pt;">、针对动作类中的所有动作进行校验</font></div><div><img src="struts基础2_files/Image [13].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/>(看好username需不需要引号)</div><div><span style="font-size: 19px;">2、针对指定的动作进行校验</span><br/>
方式一：写了一个validate方法，可以在不需要验证的动作方法前，使用</div><div><img src="struts基础2_files/Image [14].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">方式二：</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">validate<font face="宋体">方法有一定的书写规范。</font><font face="Times New Roman">public void <b>validate</b></font><font face="宋体"><b>动作方法名</b>（首字母大写）</font></span></div><div><img src="struts基础2_files/Image [15].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(255,0,0); font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">总结：所有验证不通过或转换不</span><span style="color: rgb(255, 0, 0); font-family: 宋体; font-size: 14px;">通</span><span style="color: rgb(255, 0, 0); font-size: 10.5pt; font-family: 宋体;">过的，框架都会转向<font face="Times New Roman">name=</font></span><span style="color: rgb(255, 0, 0); font-size: 10.5pt; font-family: &amp;amp;apos;Times New Roman&amp;amp;apos;;">”</span><span style="color: rgb(255, 0, 0); font-size: 10.5pt; font-family: 宋体;">input</span><span style="color: rgb(255, 0, 0); font-size: 10.5pt; font-family: &amp;amp;apos;Times New Roman&amp;amp;apos;;">”</span><span style="color: rgb(255, 0, 0); font-size: 10.5pt; font-family: 宋体;">的结果视图。要显示错误提示，使用<font face="Times New Roman">&lt;s:fieldError/&gt;,</font><font face="宋体">显示字段有关的错误提示</font></span></div><div><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; color:rgb(255,0,0); font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;"><font face="宋体"><br/></font></span></div><div><span style="font-size: 21px;"><u>声明式校验：通过xml配置文件（方便）</u></span><br/><span style="font-size: 19px;">1、针对动作类中的所有动作进行校验</span><br/><span style="font-size: 19px;">在动作类所在的包中，建立一个名称为：”动作类名-validation.xml”配置文件：</span></div><div><img src="struts基础2_files/Image [16].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><span style="font-size: 16px;">说明：dtd约束在何处---&gt;xwork-core-**.jar包中</span><br/><br/><span style="font-size: 21px;">2、针对指定的动作进行校验</span><br style="font-size: 21px;"/><span style="font-size: 21px;">方式一：使用@SkipValidation</span><br style="font-size: 21px;"/><span style="font-size: 21px;">方式二：声明文件遵循一定的书写规范：</span><br/><span style="font-size: 19px;">动作类名-动作名（struts.xml配置文件中的）-validation.xml</span></div><div><img src="struts基础2_files/Image [17].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div style="font-size: 21px;">3、struts2框架内置的声明式类型验证器<br/>
xwork-core-**.jar的<br/>
com.opensymphony.xwork2.validator.validators中的default.xml中</div><div style="font-size: 21px;"><div><font color="#008080" face="Consolas" style="font-size: medium;"><span style="font-size: 12pt;">&lt;</span></font><font color="#3F7F7F" face="Consolas" style="font-size: medium;"><span style="font-size: 12pt; background-color: rgb(212, 212, 212); background-position: initial initial; background-repeat: initial initial;">validators</span></font><font color="#008080" face="Consolas" style="font-size: medium;"><span style="font-size: 12pt;">&gt;</span></font></div></div></div></div></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;required&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.RequiredFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;requiredstring&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.RequiredStringValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;int&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.IntRangeFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;long&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.LongRangeFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;short&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.ShortRangeFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;double&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.DoubleRangeFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;date&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.DateRangeFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;expression&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.ExpressionValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#FF0000"><font face="Consolas"><span style="font-size: 12pt;">&lt;</span></font><font face="Consolas"><span style="font-size: 12pt;">validator</span></font></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;fieldexpression&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.FieldExpressionValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;email&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.EmailValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;url&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.URLValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;visitor&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.VisitorFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;conversion&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.ConversionErrorFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;stringlength&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.StringLengthFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;regex&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.RegexFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font face="Consolas"><span style="font-size:12pt">   </span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt">validator</span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">name</span></font> <font face="Consolas"><span style="font-size:12pt">=</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;conditionalvisitor&quot;</i></span></font> <font color="#7F007F" face="Consolas"><span style="font-size:12pt">class</span></font><font face="Consolas"><span style="font-size:12pt">=</span></font> <font color="#2A00FF" face="Consolas"><span style="font-size:12pt"><i>&quot;com.opensymphony.xwork2.validator.validators.ConditionalVisitorFieldValidator&quot;</i></span></font> <font color="#008080" face="Consolas"><span style="font-size:12pt">/&gt;</span></font></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt">&lt;/</span></font><font color="#3F7F7F" face="Consolas"><span style="font-size:12pt; background:#d4d4d4">validators</span></font><font color="#008080" face="Consolas"><span style="font-size:12pt">&gt;</span></font></div><div align="left"><div><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">给验证器注入参数：(找到对应的校验类,如：</span><i style="color: rgb(42, 0, 255); font-family: Consolas; font-size: 16px;">RequiredStringValidator，然后找其中的变量，有set方法的可以注入值</i><span style="font-family: 宋体; font-size: 10.5pt;">)</span></div><div><img src="struts基础2_files/Image [18].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></div></div><div align="left"><hr/></div><div align="left" style="font-size: 24px;"><b>3、自定义声明式校验</b></div><div align="left" style="font-size: 19px;">验证密码的强度<br/>
开发步骤：<br/>
1、编写一个类：实现Validator接口或者继承ValidatorSupport。如果是验证表单字段有关，建议继承FieldValidatorSupport。</div><div align="left"><img src="struts基础2_files/Image [19].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left" style="font-size: 19px;">2、注册校验器<br/>
在WEB-INF\classes目录下，建立一个固定名称为validators.xml的配置文件</div><div align="left"><img src="struts基础2_files/Image [20].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left" style="font-size: 19px;">3、可以像使用requiredstring这样的验证器来使用了</div><div align="left"><img src="struts基础2_files/Image [21].png" type="image/png" height="360" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="850"/></div><div align="left"><hr/><hr/></div><div align="left" style="font-size: 32px;"><b>四、国际化</b></div><div align="left" style="font-size: 32px;"><hr/></div><div align="left"><h2 style="margin-bottom: 0pt; margin-top: 0pt; font-size: 31px;"><span style="font-family: 黑体;"><font size="3" style="font-size: 24px;">1<font face="黑体">、配置全局国际化消息资源包</font></font></span></h2><div><br/></div></div><div align="left" style="font-size: 19px;"><b>1.写资源包文件</b></div><div align="left" style="font-size: 24px;"><img src="struts基础2_files/Image [22].png" type="image/png" height="317" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="906"/></div><div align="left" style="font-size: 24px;"><img src="struts基础2_files/Image [23].png" type="image/png" height="360" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="946"/></div><div align="left"><br/></div><div align="left" style="font-size: 19px;"><b>2、配置全局消息资源包</b></div><div align="left"><img src="struts基础2_files/Image [24].png" type="image/png" height="225" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="869"/></div><div align="left"><b style="font-size: 19px;">3、如何访问</b><br/><span style="font-size: 21px;">在动作类中：</span><br style="font-size: 21px;"/><span style="font-size: 21px;">前提，动作类继承ActionSupport</span></div><div align="left"><img src="struts基础2_files/Image [25].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></div><div align="left" style="font-size: 21px;">在页面中：</div><div align="left" style="font-size: 19px;">1）</div><div align="left" style="font-size: 19px;"><img src="struts基础2_files/Image [26].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left" style="font-size: 19px;">2）自由指定消息资源包，借助struts2的有关国际化的标签：</div><div align="left" style="font-size: 19px;"><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">如果消息资源包在</span><span style="mso-spacerun:&amp;amp;apos;yes&amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;apos;宋体&amp;amp;apos;;">com.itheima.resources.message_zh_CN.properties,则如下</span></p></div><div align="left"><img src="struts基础2_files/Image [27].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left"><hr/><b style="font-size: 21px;">2、配置局部消息资源包</b><br/><span style="font-size: 19px;">一定要经过Action才行：</span><br style="font-size: 19px;"/><span style="font-size: 19px;">书写规范：在动作类所在包中，建立名字”动作类名-zh-CN.properties”的配置文件。动作类中访问，发现局部的比全局的优先级高。</span></div><div align="left"><img src="struts基础2_files/Image [28].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></div><div align="left"><hr/></div><div align="left" style="font-size: 24px;"><b>3、包范围的消息资源包</b></div><div align="left" style="font-size: 19px;">也得经过action访问<br/>
书写有规范的，名称为package_zh_CN.properties,放在类的包中。可以被包中及子包的所有动作类来访问。</div><div align="left"><br/></div><div align="left" style="font-size: 24px;"><b>总结</b></div><div align="left"><img src="struts基础2_files/Image [29].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="left"><br/></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt"><br/></span></font></div><div align="left"><font color="#008080" face="Consolas"><span style="font-size:12pt"><br/></span></font></div></div>
</div></body></html> 