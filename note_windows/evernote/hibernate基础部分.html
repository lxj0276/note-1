<html>
<head>
  <title>hibernate基础部分</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="2955"/>
<h1>hibernate基础部分</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/8/4 18:21</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/8/28 0:13</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="file:///"><i>file:///</i></a></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><h2 style="margin-bottom:0pt; margin-top:0pt;"><a href="hibernate基础部分_files/hibernate.xmind"><img src="hibernate基础部分_files/15cfe07a3d8165bd53a6f2565fd35240.png" alt="hibernate.xmind"></a><font face="Arial"><span style="font-size: 21px;"><br/></span></font></h2><div><br/></div><div><span style="font-size: 19px;">0.建立配置</span></div><div><a href="hibernate基础部分_files/hibernate.cfg.xml"><img src="hibernate基础部分_files/7072bc2a5af84d599e12bc7f6beb7699.png" alt="hibernate.cfg.xml"></a></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">     hibernate<font face="宋体">的配置文件可以分为两个部分</font></span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">        <span> </span><span>1</span><font face="宋体"><span>、数据库的连接配</span>置</font></span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><img src="hibernate基础部分_files/Image.png" type="image/png" height="223" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="554"/></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">       2<font face="宋体">、其他配置</font></span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><img src="hibernate基础部分_files/Image [1].png" type="image/png" height="238" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="554"/></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">3<font face="宋体">、建立持久化类和映射文件</font></span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">     Person.java</span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">     Person.hbm.xml</span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">4<font face="宋体">、把映射文件加入到</font><font face="Times New Roman">hibernate</font><font face="宋体">的配置文件中</font></span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><img src="hibernate基础部分_files/Image [2].png" type="image/png" height="16" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="554"/></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;"> </span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">5<font face="宋体">、写</font><font face="Times New Roman">api</font></span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">     1<font face="宋体">、先根据持久化类和映射文件创建数据库中的表</font></span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">          </span></p><img src="hibernate基础部分_files/Image [3].png" type="image/png" height="131" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="554"/></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">    注意：</span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">        在<font face="Times New Roman">hibernate</font><font face="宋体">的配置文件中</font></span></p></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">       </span><span style="font-family: &amp;amp;amp;apos;Times New Roman&amp;amp;amp;apos;; font-size: 10.5pt;">&lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;</span></p></div></blockquote><div><p style="margin-bottom:0pt; margin-top:0pt;"></p><p style="margin-bottom:0pt; margin-top:0pt;"></p><p style="margin-bottom:0pt; margin-top:0pt;"></p></div><div><span style="font-size: 19px;">1.执行过程：</span><br/>
     1、创建Configuration对象<br/>
     2、利用Configuration对象的config方法加载配置文件<br/>
     3、config.buildSessionFactory方法产生SessionFactory<br/>
          sessionFactory<br/>
               1、包含了数据库的链接信息<br/>
               2、配置文件的信息<br/>
               3、映射文件的信息<br/>
               4、持久化类的信息<br/>
               5、一个sessionFactory表明链接了一个数据库<br/>
               6、sessionFactory是一个单例的对象<br/>
     4、sessionFactory产生session<br/>
          session<br/>
               1、创建一次session,就打开数据库的链路一次<br/>
               2、session的打开和关闭的次数越多，效率越低<br/>
               3、session中的一级缓存缓存了数据<br/>
     5、由session创建事务<br/>
     6、进行crud的操作<br/>
     7、提交事务<br/>
     8、关闭session</div><div>2.执行级联删除操作的时候：</div><div>    需要设置级联属性:---在Classes.hbm.xml文件中： &lt;set name=&quot;students&quot; cascade=&quot;delete&quot;&gt;</div><div style="font-size: 19px;">3.<span style="font-family: 宋体;">hibernate</span><font face="宋体" style="font-family: 宋体;">的流程</font></div><div>     <span style="font-family: 宋体; font-size: 10.5pt;">说明：</span></div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">    1<font face="宋体">、通过</font><font face="Times New Roman">Configuration</font><font face="宋体">的</font><font face="Times New Roman">config</font><font face="宋体">方法加载</font><font face="Times New Roman">hibernate</font><font face="宋体">的配置文件</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">    2<font face="宋体">、</font><font face="Times New Roman">SessionFactory</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">          一个<font face="Times New Roman">sessionFactory</font><font face="宋体">代表数据库的描述</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">          配置文件的信息、映射文件的信息、持久化类的信息全部在<font face="Times New Roman">sessionFactory</font><font face="宋体">中</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">          一个数据库只能有一个<font face="Times New Roman">sessionFactory</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">          sessionFactory<font face="宋体">对象本身是线程安全的</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">          hibernate<font face="宋体">的二级缓存在</font><font face="Times New Roman">sessionFactory</font><font face="宋体">中，二级缓存的存放地方：</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">           SessionFactoryImpl:</span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">               </span><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;Times New Roman&amp;amp;amp;apos;;">private final transient Map entityPersisters;</span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">    3<font face="宋体">、</font><font face="Times New Roman">crud</font><font face="宋体">操作都是由</font><font face="Times New Roman">session</font><font face="宋体">来完成的。</font></span></p><div><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">    4<font face="宋体">、操作完成以后必须关闭</font><font face="Times New Roman">session</font><font face="宋体">。</font></span></div><div style="font-size: 19px;"><b><span style="font-family: 宋体;"><font face="宋体">4.</font></span><font face="Times New Roman">hibernate</font><font face="宋体" style="font-family: 宋体;">配置文件的加载的两种方式</font></b></div><div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;"> 1<font face="宋体">、</font><font face="Times New Roman">hibernate</font><font face="宋体">配置文件的加载</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">               1<font face="宋体">、</font></span></p><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">                  </span><img src="hibernate基础部分_files/Image [4].png" type="image/png" height="111" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="553"/></p><div><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">               2<font face="宋体">、</font></span><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;Times New Roman&amp;amp;amp;apos;;"><br/></span><br/></div><p style="margin-bottom:0pt; margin-top:0pt;"><span style="mso-spacerun:&amp;amp;amp;apos;yes&amp;amp;amp;apos;; font-size:10.5000pt; font-family:&amp;amp;amp;apos;宋体&amp;amp;amp;apos;;">根据指定的路径进行加载。</span></p></div><div style="font-size: 19px;"><font face="宋体"><b><br/></b></font></div></div>
</div></body></html> 