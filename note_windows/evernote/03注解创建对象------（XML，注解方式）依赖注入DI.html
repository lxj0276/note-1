<html>
<head>
  <title>03注解创建对象------（XML，注解方式）依赖注入DI</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="5238"/>
<h1>03注解创建对象------（XML，注解方式）依赖注入DI</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/8/10 21:35</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/8/30 10:37</i></td></tr>
<tr><td><b>标签：</b></td><td><i>init注入, srping创建对象的三种形式, 默认构造器，setter方法, 有参构造器注入</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="file:///"><i>file:///</i></a></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">
一种是配置文件的依赖注入（通过<span style="-evernote-highlight:true;background-color:rgb(255, 250, 165);">默认构造和set方法，或者通过init构造器</span>）
<div>一种是基于注解的依赖注入（只针对引用类型的变量。）</div><div><hr/>
首先，是基于<span style="-evernote-highlight:true;background-color: rgb(255, 250, 165);"><b>默认构造器和set方法</b></span>连用的依赖注入：</div><div><br/></div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image.png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>下面这个类的实例，是person类的一个属性。</div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [1].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/></div><div style="font-size: 32px;"><br/></div><div style="font-size: 32px;"><b style="-evernote-highlight:true;background-color:rgb(255, 250, 165);">注意，装配，也就是依赖注入，是在init方法之前进行的。</b></div><div><br/></div><div>首先在该类中，要提供set和默认的构造器。</div><div><br/></div><div>然后，在配置文件中，对其进行装配：</div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [2].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><br/></div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [3].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [4].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [5].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/>关于properties类型，为键值对，都是字符串，可能为引用类型</div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [6].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/>对于数组，使用list来封装。</div><div><br/></div><div>这样，就封装完毕了，然后，就是启动容器，获取对象向，调用对象了。</div><hr/><b style="-evernote-highlight:true;background-color: rgb(255, 250, 165);">使用构造器进行装配：</b><div style="font-size: 32px;"><b><font color="#3665EE" style="-evernote-highlight:true;background-color:rgb(255, 250, 165);">注意框架创建对象，使用的默认构造器，这个一定要在代码中体现，不能创建的新的构造器，就没有了默认构造器。</font></b></div><div><br/></div><div><br/></div><div><br/></div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [7].png" type="image/png" height="213" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="1321"/></div><div><br/></div><div>在配置文件中，注意使用的标签。</div><div><hr/>
使用注解进行装配：</div><div style="font-size: 32px;">也就是在属性上，加上注解，然后，通过属性的name的值，找到配置文件中的id，然后，就可以直接让容器创建对象。</div><div>首先，要导包：</div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [8].png" type="image/png" height="679" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="1343"/></div><div><br/><div style="font-size: 64px;"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [9].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><br/></div><div>使用注解的配置文件：</div><div><a href="03注解创建对象------（XML，注解方式）依赖注入DI_files/applicationContext.xml"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/9889b285257a8ce549de238833e17530.png" alt="applicationContext.xml"></a></div><div>在配置文件中，引入命名空间：</div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [10].png" type="image/png" height="534" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="885"/></div><div>这样，直接在类中，使用注解，就可以了.</div><div><br/></div><div><br/></div><div><br/></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">1、启动spring容器</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">2、把person和student两个bean实例化</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">3、当spring容器解析到</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">           &lt;context:annotation-</span> <span style="font-size:14pt"><u>config</u></span><span style="font-size:14pt">&gt;&lt;/context:annotation-</span><span style="font-size:14pt"><u>config</u></span><span style="font-size:14pt">&gt;</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">      就会启动依赖注入的注解解析器</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">4、spring容器会在纳入spring管理的bean的范围内查找,看这些类的哪些属性上加有@Resource注解</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">5、如果某一个属性上加有@Resource注解</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">           会查看该注解的name属性的值是否为&quot;&quot;</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size: 14pt;">              如果为&quot;&quot;,则会把该注解所在的属性的名称和spring容器中的</span><span style="font-size: 24px;">id</span><span style="font-size: 14pt;">的值作匹配，如果匹配成功，则赋值</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size: 14pt;">                                         如果匹配不成功，则按照</span><span style="font-size: 24px;">类型</span><span style="font-size: 14pt;">进行匹配,匹配成功则赋值</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">                                            如果再匹配不成功,则报错</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size: 14pt;">              如果不为&quot;&quot;,则把该注解的</span><span style="font-size: 32px;">name</span><span style="font-size: 14pt;">属性的值和spring容器中</span><span style="font-size: 32px;">id</span><span style="font-size: 14pt;">的值作匹配，如果匹配成功，则赋值</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">                                           如果匹配不成功,则直接报错</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">                                          </span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">     说明:</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas"><span style="font-size: 14pt;">          注解只能作用于</span><span style="font-size: 32px;">引用类型</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          </span><span style="font-size:14pt"><u>xml</u></span><span style="font-size:14pt">与注解的对比</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          </span><span style="font-size:14pt"><u>xml</u></span><span style="font-size:14pt">的效率比较高，书写比较麻烦</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          注解的书写比较简单，效率比较低</span></font></div><div><br/></div><div><br/></div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [11].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><span style="font-size: 32px;">启动注解解析器：</span><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [12].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="justify"><font color="#010101" face="Times New Roman">spring</font><font color="#010101" face="宋体">自己弄的注解</font></div><div align="justify"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [13].png" type="image/png" alt="graphic" border="0" height="107" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="551"/></div><div align="justify"><font color="#010101" face="Times New Roman" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="justify"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [14].png" type="image/png" alt="graphic" border="0" height="62" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="549"/></div><div align="justify"><br/></div><div align="justify"><br/></div><div align="justify">大体流程：</div><div align="justify">在person中，给属性加上注解：并且，注解只能给引用类型的变量，赋值，也就是说，Person中的student属性，通过注解给予赋值：</div><div align="justify"><br/></div><div align="justify"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [15].png" type="image/png" height="496" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="1199"/></div><div align="justify"><br/></div><div align="justify"><hr/></div><div align="justify">  上面既然可以扫描属性，就一定可以扫描类，其目的就是不用在配置文件中，也bean标签了。</div><div align="justify">也就是说，在配置文件中，不用beam标签了。</div><div><br/></div><div><br/></div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [16].png" type="image/png" height="307" style="cursor: default;cursor: default;cursor: default;cursor: default;" width="880"/></div><div><br/></div><div>然后：</div><div>第一个类：</div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [17].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>第二个类：</div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [18].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div>最后，就是使用：</div><div><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [19].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div><br/></div><div>配置文件如下：</div><div><br/></div><div><a href="03注解创建对象------（XML，注解方式）依赖注入DI_files/applicationContext.xml"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/702244f640b09a0ca691f03c461daf40.png" alt="applicationContext.xml"></a></div><div><br/></div><div>原理：</div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">/**</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt"> * 原理</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt"> *    1、启动spring容器</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt"> *    2、spring容器解析</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt"> *         &lt;context:component-scan base-package=&quot;com.itheima10.spring.scan&quot;&gt;</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">               &lt;/context:component-scan&gt;</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">       3、在base</span></font> <font color="#7F7F9F" face="Consolas" size="4"><span style="font-size:14pt">-</span></font><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">package指定的包及子包中扫描,看哪些类上面是否含有@Component注解</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">       4、如果有该注解</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#7F9FBF" face="Consolas" size="4"><span style="font-size:14pt"><b>@Component</b></span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          public class Person {</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          }</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          ==</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          &lt;bean id=&quot;person&quot; class=&quot;..Person&quot;&gt;</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#7F9FBF" face="Consolas" size="4"><span style="font-size:14pt"><b>@Component</b></span></font><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">(&quot;</span><span style="font-size:14pt"><u>aa</u></span><span style="font-size:14pt">&quot;)</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          public class Person {</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          }</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          ==</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          &lt;bean id=&quot;</span> <span style="font-size:14pt"><u>aa</u></span><span style="font-size:14pt">&quot; class=&quot;..Person&quot;&gt;</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">        5、按照@Resource的解析步骤执行</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">     说明：</span></font></div><div align="left"><font color="#3F5FBF" face="Consolas" size="4"><span style="font-size:14pt">          整个过程扫描两次，效率越来越低，书写越来越简单</span></font></div><div><br/></div><div>注：在配置文件中，就不用写bean这个标签了，因此既然可以扫描到注解，就一定知道类的全名，框架就一定可以new出这个对象的。哈哈哈，给类打上印记，还能找不到？？可笑。</div><hr/><div>使用注解，进行依赖注入的另外两个例子：</div><div><font color="#010101" face="宋体" style="text-align: justify;">使用注解的方式，修改</font><span style="text-align: justify;"> </span><font color="#010101" face="Times New Roman" style="text-align: justify;">document文件管理系统：</font></div><div><b>（1）弄好spring的配置文件</b>：</div><div align="left"><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&lt;?</span></font><font color="#3F7F7F" face="Consolas" size="4"><span style="font-size:14pt">xml</span></font> <font color="#7F007F" face="Consolas" size="4"><span style="font-size:14pt">version</span></font><font face="Consolas" size="4"><span style="font-size:14pt">=</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>&quot;1.0&quot;</i></span></font> <font color="#7F007F" face="Consolas" size="4"><span style="font-size:14pt">encoding</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">=</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>&quot;UTF-8&quot;</i></span></font><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">?&gt;</span></font></div><div align="left"><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&lt;</span></font><font color="#3F7F7F" face="Consolas" size="4"><span style="font-size:14pt">beans</span></font> <font color="#7F007F" face="Consolas" size="4"><span style="font-size:14pt">xmlns</span></font><font face="Consolas" size="4"><span style="font-size:14pt">=</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>&quot;http://www.springframework.org/schema/beans&quot;</i></span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt">       </span></font> <font color="#7F007F" face="Consolas" size="4"><span style="font-size:14pt">xmlns:context</span></font><font face="Consolas" size="4"><span style="font-size:14pt">=</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>&quot;http://www.springframework.org/schema/context&quot;</i></span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt">      </span></font> <font color="#7F007F" face="Consolas" size="4"><span style="font-size:14pt">xmlns:xsi</span></font><font face="Consolas" size="4"><span style="font-size:14pt">=</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</i></span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt">      </span></font> <font color="#7F007F" face="Consolas" size="4"><span style="font-size:14pt">xsi:schemaLocation</span></font><font face="Consolas" size="4"><span style="font-size:14pt">=</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>&quot;http://www.springframework.org/schema/beans</i></span></font></div><div align="left"><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd</i></span></font></div><div align="left"><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>           http://www.springframework.org/schema/context</i></span></font></div><div align="left"><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>           http://www.springframework.org/schema/context/spring-context-2.5.xsd&quot;</i></span></font><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&gt;</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&lt;</span></font><font color="#3F7F7F" face="Consolas" size="4"><span style="font-size:14pt">context:component-scan</span></font> <font color="#7F007F" face="Consolas" size="4"><span style="font-size:14pt">base-package</span></font><font face="Consolas" size="4"><span style="font-size:14pt">=</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt"><i>&quot;com.itheima10.spring.iocdi.document&quot;</i></span></font> <font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&gt;</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&lt;/</span></font><font color="#3F7F7F" face="Consolas" size="4"><span style="font-size:14pt">context:component-scan</span></font> <font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&gt;</span></font></div><div align="left"><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&lt;/</span></font><font color="#3F7F7F" face="Consolas" size="4"><span style="font-size:14pt">beans</span></font><font color="#008080" face="Consolas" size="4"><span style="font-size:14pt">&gt;</span></font></div><div align="justify"><font color="#010101"><br/></font></div><div align="justify"><b>（2）<font color="#010101">总接口：</font></b></div><div align="justify"><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>interface</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">Document {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">read();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">write();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><b><span style="text-align: -webkit-auto;">（3）</span><font face="Consolas" size="4"><span style="font-size:14pt">各种实现接口的具体实现类，使用了类注解，这样就不用在配置文件中写bean标签了。</span></font></b></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">第一个实现类：</span></font></div><div align="left"><div align="left"><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@Component</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;excelDocument&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">)</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>class</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">ExcelDocument</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>implements</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">Document{</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">read() {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          System.</span></font> <font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt"><i>out</i></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.println(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;excel read&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">write() {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          System.</span></font> <font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt"><i>out</i></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.println(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;excel write&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div></div></div><div align="justify"><font color="#010101" face="Times New Roman">第二个实现类：</font></div><div align="justify"><div align="left"><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@Component</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;pdfDocument&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">)</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>class</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">PDFDocument</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>implements</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">Document{</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">read() {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          System.</span></font> <font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt"><i>out</i></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.println(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;pdf read&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">write() {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          System.</span></font> <font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt"><i>out</i></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.println(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;pdf write&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div><div align="left"><div><span style="text-align: -webkit-auto;"><br/><b>（4）<font face="Consolas">需要为客户提供的bean。</font></b></span></div></div></div><div align="justify"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [20].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="justify"><b>（5）测试类：</b></div><div align="justify"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [21].png" type="image/png" height="106" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="981"/></div><div align="justify"><font color="#010101" face="Times New Roman"><br/></font></div><div align="justify"><hr/></div><div align="justify"><font color="#010101" face="宋体">用注解来修改</font> <font color="#010101" face="Times New Roman">MVC</font></div><div align="justify"><font color="#010101" face="Times New Roman"><br/></font></div><div align="justify"><font color="#010101" face="Times New Roman">（1）dao层：注意该层的注解的类型：</font></div><div align="justify"><div align="left"><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@Repository</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;personDao&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">)</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>class</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">PersonDaoImpl</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>implements</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">PersonDao{</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">savePerson() {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          System.</span></font> <font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt"><i>out</i></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.println(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;save person&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div><div align="left"><span style="color: rgb(1, 1, 1); font-family: &amp;amp;amp;amp;amp;apos;Times New Roman&amp;amp;amp;amp;amp;apos;;">（2）service层：该层类的注解为</span><font color="#646464" face="Consolas" size="4"><span style="font-size: 14pt;">@Service</span></font><font face="Consolas" size="4"> <span style="font-size: 14pt;">(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size: 14pt;">&quot;personService&quot;</span></font> <font face="Consolas" size="4"><span style="font-size: 14pt;">)，该层的注入使用的注解为：</span></font><font color="#646464" face="Consolas" size="4"><span style="font-size: 14pt;">@Resource</span></font><font face="Consolas" size="4"><span style="font-size: 14pt;">(name=</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size: 14pt;">&quot;personDao&quot;</span></font><font face="Consolas" size="4"> <span style="font-size: 14pt;">)</span></font></div><div align="left"><div align="left"><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@Service</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;personService&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">)</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>class</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">PersonServiceImpl</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>implements</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">PersonService{</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@Resource</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(name=</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;personDao&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt">)</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>private</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">PersonDao</span></font> <font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt">personDao</span></font><font face="Consolas" size="4"><span style="font-size:14pt">;</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">savePerson() {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>this</b></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.</span></font><font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt">personDao</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">.savePerson();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div></div></div><div align="justify"><font color="#010101" face="Times New Roman">（3）controller层使用的注解为：</font><font color="#646464" face="Consolas" size="4" style="text-align: -webkit-left;"><span style="font-size: 14pt;">@Controller</span></font><font face="Consolas" size="4" style="text-align: -webkit-left;"> <span style="font-size: 14pt;">(</span></font><font color="#2A00FF" face="Consolas" size="4" style="text-align: -webkit-left;"><span style="font-size: 14pt;">&quot;personAction&quot;</span></font><span style="text-align: -webkit-left;"> </span><font face="Consolas" size="4" style="text-align: -webkit-left;"><span style="font-size: 14pt;">)</span></font></div><div align="justify"><div align="left"><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@Controller</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;personAction&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">)</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>class</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">PersonAction {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@Resource</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(name=</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;personService&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt">)</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>private</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">PersonService</span></font> <font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt">personService</span></font><font face="Consolas" size="4"><span style="font-size:14pt">;</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">setPersonService(PersonService personService) {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>this</b></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.</span></font><font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt">personService</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">= personService;</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">savePerson(){</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>this</b></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.</span></font><font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt">personService</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">.savePerson();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div></div><div align="justify"><div style="text-align: -webkit-auto;">最后的测试层为：</div><div style="text-align: -webkit-auto;"><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size: 14pt;"><b>public</b></span></font><font face="Consolas" size="4"> </font><font color="#7F0055" face="Consolas" size="4"><span style="font-size: 14pt;"><b>class</b></span></font> <font face="Consolas" size="4"><span style="font-size: 14pt;">MVCTest {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size: 14pt;">     </span></font><font color="#646464" face="Consolas" size="4"> <span style="font-size: 14pt;">@Test</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size: 14pt;">     </span></font><font color="#7F0055" face="Consolas" size="4"> <span style="font-size: 14pt;"><b>public</b></span></font><font face="Consolas" size="4"><span style="font-size: 14pt;"> </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size: 14pt;"><b>void</b></span></font><font face="Consolas" size="4"> <span style="font-size: 14pt;">testMVC(){</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size: 14pt;">          ApplicationContext context =</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size: 14pt;">                    </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size: 14pt;"><b>new</b></span></font><font face="Consolas" size="4"> <span style="font-size: 14pt;">ClassPathXmlApplicationContext(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size: 14pt;">&quot;applicationContext.xml&quot;</span></font> <font face="Consolas" size="4"><span style="font-size: 14pt;">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size: 14pt;">          PersonAction personAction = (PersonAction)context.getBean(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size: 14pt;">&quot;personAction&quot;</span></font> <font face="Consolas" size="4"><span style="font-size: 14pt;">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size: 14pt;">          personAction.savePerson();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size: 14pt;">     }</span></font></div><hr/>
总结：各层注解的名字不同，但是，功能相同：</div></div><div align="justify"><font color="#010101" face="Times New Roman"><br/></font></div><div align="justify"><br/></div><div align="justify"><font color="#010101" face="宋体">控制层</font></div><div align="justify"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [22].png" type="image/png" alt="graphic" border="0" height="56" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="430"/></div><div align="justify"><font color="#010101" face="Times New Roman"><br/></font></div><div align="justify"><font color="#010101" face="宋体">业务层</font></div><div align="justify"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [23].png" type="image/png" style="cursor: default;cursor: default;cursor: default;cursor: default;"/></div><div align="justify"><font color="#010101" face="Times New Roman">dao</font><font color="#010101" face="宋体">层</font></div><div align="justify"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [24].png" type="image/png" alt="graphic" border="0" height="32" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="333"/></div><div align="justify"><font color="#010101" face="宋体">类中对引用类型赋值的注解：</font></div><div align="justify"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [25].png" type="image/png" alt="graphic" border="0" height="28" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="407"/></div><div align="justify"><font color="#010101" face="Times New Roman"><br/></font></div><div align="justify"><font color="#010101" face="宋体">普通类的注解：</font></div><div align="justify"><font color="#010101" face="宋体">目的是配置文件中，不使用</font> <font color="#010101" face="Times New Roman">bean</font><font color="#010101" face="宋体">标签。</font></div><div align="justify"><img src="03注解创建对象------（XML，注解方式）依赖注入DI_files/Image [26].png" type="image/png" alt="graphic" border="0" height="25" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="377"/></div><div><br/></div></div></div>
</div></body></html> 