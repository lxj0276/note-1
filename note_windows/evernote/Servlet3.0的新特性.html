<html>
<head>
  <title>Servlet3.0的新特性</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="1642"/>
<h1>Servlet3.0的新特性</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/7/21 23:20</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/7/22 8:52</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="file:///F:/%E8%AF%BE%E4%BB%B6/day22_baseEnhance/%E8%B5%84%E6%96%99/servlet-3_0-final-javadoc/javax/servlet/http/Part.html"><i>file:///F:/%E8%AF%BE%E4%BB%B6/day22_baseEnhance/%E8%B5%84%E6%96%99/servlet-3_0-final-javadoc/javax/servlet/http/Part.html</i></a></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 32px;"><span style="color: rgb(0, 0, 255); font-family: 宋体;"><a href="http://www.jcp.org/">www.jcp.org </a>所有与java相关的规范</span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">代号：<font face="Times New Roman">JSR-****</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">之前：<font face="Times New Roman">Servlet2.5</font><font face="宋体">规范</font></span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;"> </span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">Servlet3.0<font face="宋体">前提：</font></span></p><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">1<font face="宋体">、</font><font face="Times New Roman">JDK6.0+</font></span></p><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">2<font face="宋体">、</font><font face="Times New Roman">Tomcat7.0+</font></span></p><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">3<font face="宋体">、</font><font face="Times New Roman">MyEclipse10.0+</font></span></p><p style="text-indent: 21pt; margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;"> </span></p><p style="margin-bottom: 0pt; margin-top: 0pt; font-size: 21px;"><span style="font-family: 宋体;">特性：</span></p><div style="font-size: 21px;"><span style="font-family: 宋体;">web.xml<font face="宋体">已经不是必要的了。</font></span></div><div style="font-size: 21px;"><img src="Servlet3.0的新特性_files/Image.png" type="image/png" style="cursor: default;"/></div><div style="font-size: 21px;"><img src="Servlet3.0的新特性_files/Image [1].png" type="image/png" height="511" style="cursor: default;cursor: default;cursor: default;" width="1008"/></div><div><h2><font size="3" style="font-size: 16px;">1.javax.servlet.http</font><br/><span style="font-size: 21px;">      Interface Part</span></h2></div><div><span style="font-size: 21px;">             </span> <span style="font-size: 16px;"> This class represents a part or form item that was received within a</span> <code style="font-size: 16px;">multipart/form-data</code> <span style="font-size: 16px;">POST request.</span></div>
 <br/><div style="font-size: 21px;"><span style="font-family: 宋体;"><font face="宋体"><br/></font></span></div><div style="font-size: 21px;"><span style="font-family: 宋体;"><font face="宋体">可以用注解的方式代替在web.xml中的配置</font></span></div><div style="font-size: 21px;"><span style="font-family: 宋体;"><font face="宋体"><br/></font></span></div><div style="font-size: 24px;"><span style="font-family: 宋体;"><font color="#E30000" face="宋体">1、用注解配置Filter</font></span></div><div align="left"><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">java.io.IOException;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.Filter;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.FilterChain;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.FilterConfig;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.ServletException;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.ServletRequest;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.ServletResponse;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.annotation.WebFilter;</span></font></div><div align="left"><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@WebFilter</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;*.jsp&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">)</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>class</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">FilterDemo1</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>implements</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">Filter {</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">init(FilterConfig filterConfig)</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>throws</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">ServletException {</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">doFilter(ServletRequest request, ServletResponse response,</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">              FilterChain chain)</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>throws</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">IOException, ServletException {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          System.</span></font> <font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt"><i>out</i></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.println(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;FilterDemo1过滤了&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          chain.doFilter(request, response);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">destroy() {</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div><div align="left" style="font-size: 24px;"><font color="#E30000" face="Consolas">2、用注解配置Listener</font></div><div align="left"><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.annotation.WebListener;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.http.HttpSessionEvent;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.http.HttpSessionListener;</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@WebListener</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>class</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">MyHttpSessionListener</span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>implements</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">HttpSessionListener {</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">sessionCreated(HttpSessionEvent se) {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          System.</span></font> <font color="#0000C0" face="Consolas" size="4"><span style="font-size:14pt"><i>out</i></span></font><font face="Consolas" size="4"><span style="font-size:14pt">.println(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;HttpSession创建了&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">sessionDestroyed(HttpSessionEvent se) {</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div></div></div><div align="left" style="font-size: 24px;"><font color="#E30000" face="Consolas">3、用注解配置Servlet</font></div><div align="left"><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">java.io.IOException;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">java.io.PrintWriter;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">java.util.Enumeration;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.ServletConfig;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.ServletException;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.annotation.WebInitParam;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.annotation.WebServlet;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.http.HttpServlet;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.http.HttpServletRequest;</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>import</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">javax.servlet.http.HttpServletResponse;</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@WebServlet</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(value = {</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;/servlet/ServletDemo1&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">,</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;/servlet/ServletDemo11&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">}, initParams = {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@WebInitParam</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(name =</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;encoding&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">, value =</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;UTF-8&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt">),</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@WebInitParam</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(name =</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;XXX&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">, value =</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;YYY&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt">) })</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>class</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt"><u>ServletDemo1</u></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>extends</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">HttpServlet {</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">doGet(HttpServletRequest request, HttpServletResponse response)</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">              </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>throws</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">ServletException, IOException {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          response.setContentType(</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;text/html;charset=UTF-8&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          PrintWriter out = response.getWriter();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          out.write(</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;ServletDemo1&lt;hr/&gt;&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          ServletConfig cfg = getServletConfig();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span> <span style="font-size:14pt"><u>Enumeration</u></span> <span style="font-size:14pt">e = cfg.getInitParameterNames();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>while</b></span></font><font face="Consolas" size="4"><span style="font-size:14pt">(e.hasMoreElements()){</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">              String paramName = (String)e.nextElement();</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">               out.write(paramName+</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;=&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt">+cfg.getInitParameter(paramName)+</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;&lt;br/&gt;&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">doPost(HttpServletRequest request, HttpServletResponse response)</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">              </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>throws</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">ServletException, IOException {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          doGet(request, response);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div></div><div style="font-size: 24px;"><font color="#E30000">4、用Servlet3.0新特性简单实现文件上传：</font></div><div align="left"><div align="left"><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@WebServlet</span></font><font face="Consolas" size="4"><span style="font-size:14pt">(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;/servlet/UploadServlet&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">)</span></font></div><div align="left"><font color="#646464" face="Consolas" size="4"><span style="font-size:14pt">@MultipartConfig</span></font><font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt">//说明处理的是</span><span style="font-size:14pt"><u>multipart</u></span> <span style="font-size:14pt">/form-data类型</span></font></div><div align="left"><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>class</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt"><u>UploadServlet</u></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>extends</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">HttpServlet {</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">doGet(HttpServletRequest request, HttpServletResponse response)</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">              </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>throws</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">ServletException, IOException {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          request.setCharacterEncoding(</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;UTF-8&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          String</span> <span style="font-size:14pt"><u>username</u></span> <span style="font-size:14pt">= request.getParameter(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;username&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt">//Part接口：相当于FileItem，代表着表单中的每一部分</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt">//String photo = request.getParameter(&quot;photo&quot;);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          Part photoPart = request.getPart(</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;photo&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt">//截取文件名</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          String headerValue = photoPart.getHeader(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;Content-Disposition&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:14pt">//System.out.println(headerValue);//form-data; name=&quot;photo&quot;; filename=&quot;0.</span><span style="font-size:14pt"><u>jpg</u></span><span style="font-size:14pt">&quot;</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>int</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">index = headerValue.indexOf(</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;filename=&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          String fileName = headerValue.substring(index+10, headerValue.length()-1);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          photoPart.write(getServletContext().getRealPath(</span></font> <font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;/files&quot;</span></font><font face="Consolas" size="4"><span style="font-size:14pt">)+</span></font><font color="#2A00FF" face="Consolas" size="4"><span style="font-size:14pt">&quot;/&quot;</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">+fileName);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font color="#010101" face="Consolas" size="4"><span style="font-size:14pt"><br/></span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     </span></font><font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>void</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">doPost(HttpServletRequest request, HttpServletResponse response)</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">              </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>throws</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">ServletException, IOException {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">          doGet(request, response);</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">     }</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">}</span></font></div><div align="left"><img src="Servlet3.0的新特性_files/ScreenClip.png" type="image/png" height="511" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="1008"/></div><div align="left"><br/></div><div align="left"><br/></div><div align="left"><br/></div><div align="left"><br/></div><div align="left"><br/></div><div align="left"><img src="Servlet3.0的新特性_files/Image [2].png" type="image/png" height="504" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="798"/></div><div align="left"><br/></div><div align="left"><br/></div></div></div>
</div></body></html> 