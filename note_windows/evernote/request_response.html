<html>
<head>
  <title>request_response</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272236; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="5719"/>
<h1>request_response</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/8/20 21:20</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/10/19 1:42</i></td></tr>
<tr><td><b>标签：</b></td><td><i>request, response</i></td></tr>
<tr><td><b>来源：</b></td><td><a href="about:blank"><i>about:blank</i></a></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="font-family: 微软雅黑; font-size: 14px;">1,各种URL地址的写法</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    相对路径：</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    绝对路径：推荐使用。必须以&quot;/&quot;开头,主要是针对服务器</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;"> </span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    绝对路径在使用时：如果是在服务器端寻找的,&quot;/&quot;就代表当前应用。否则就需要加上当前应用名称。</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;"> </span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    form的action：要加应用名称</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    &lt;a href=&quot;&quot;/&gt;：要加应用名称</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    &lt;img src=&quot;&quot;/&gt;：要加应用名称</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    &lt;script src=&quot;&quot;&gt;&lt;/script&gt;：要加应用名称</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    &lt;link href=&quot;&quot;/&gt;：要加应用名称</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    HttpServletResponse.sendRedirect(String path)：要加应用名称</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    ServletContext.getRealPath(String url):不要加</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">    ServletRequest.getRequestDispatcher(String path):不要加</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">2,.response</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        代表了服务器对客户端一次响应</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">   实现原理:</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        就是通过向客户端发送一些响应消息头，响应正文，响应状态.</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">   输出正文:</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        1.字节流</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">           response.getOutpuStream();//默认用本地编码  GBK-------------&gt;浏览器也得是GBK</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">            response.getOutpuStream(&quot;&quot;.getBytes(&quot;UTF-8&quot;));//修改编码，用指定的UTF-8-------&gt;浏览器也得UTF-8</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">            //浏览器编码</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">            1.手工</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">            2.代码</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">              response.setHeader(&quot;Content-Type&quot;,&quot;text/html;charset=UTF-8&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">              out.write(&quot;&lt;meta   http-equiv='Content-Type'  content='text/html;charset=UTF-8'/&gt;&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">              response.setContentType(&quot;text/html;charset=UTF-8&quot;);//这一行代码其实有两个功能,1,告诉浏览器发的文件是用的什么编码</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">                                                                                                                                                                                2,告诉服务器,要使用什么编码</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        2.字符流</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">         //  response.setCharacterEncoding(&quot;UTF-8&quot;);//设置服务器响应正文用的编码</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">             //1.第一个作用:就是上一行代码的作用，第二个作用:设置浏览器编码</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">            response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">           PrintWriter out = response.getWriter();//默认iso-8859-1</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">           out.write(&quot;椟槥&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">           </span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">3. </span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">   1.文件下载</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        中文文件名</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        响应头：</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        Content-Disposition:attachment;filename=&quot;+URLEncoder.encode(filename);//这一行其实就是对文件名进行编码</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        Content-Type:application/octet-stream</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">   2.验证码</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        BufferedImage //在内存生成一个图片</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        Graphics        //得到画笔,得到画笔后就可以画边框,背景,干扰线,验证文件本,</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        ImageIO                //将生成的验证码输出</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        设置响应头</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        response.setHeader(&quot;Content-Type&quot;,&quot;image/jpeg&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;"> </span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        //清除缓存</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        response.setHeader(&quot;Expires&quot;,&quot;-1&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        response.setHeader(&quot;Cache-Control&quot;,&quot;no-cache&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        response.setheader(&quot;Pragma&quot;,&quot;no-cache&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        &lt;img src=&quot;&quot;/&gt;</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">4.重定向</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        //实现原理</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        response.setStatus(302);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        response.setHeader(&quot;Location&quot;,&quot;&quot;);//</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        response.sendRedirect(&quot;/day08_00_servlet/servlet/.....&quot;);//方法重定向</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">request对象</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        实现原理</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        2.取参数</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">          getMethod()</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">          getRemoteAddr()</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">          getLocalAddr()</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">          getRequestURI()</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">          getRequestURL()</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">          getRemotePort()</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        3.得到请求头信息</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        </span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        4.得到请求参数</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">          getParameter();//一个值</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">          getParameterNames()//所有的参数名字</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">          getParameterValues();</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">          getParameterMap();</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        5.封装参数到实体对象</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        6.文件上传  getInputStream();  ----------------&gt;form表单一定是method=&quot;post&quot;</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        </span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        7.request域范围</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">                只限于本次请求</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">                setAttribute(&quot;&quot;,Object);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">                Object obj = getAttribute(&quot;&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">                request.removeAttrbiute(&quot;&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        8.转发</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">                ServletContext.getRequestDispatcher(&quot;绝对地址&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">                request.getRequestDispatcher(&quot;绝对地址、相对地址都可以&quot;);</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        9.包含</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">                include();//只包含目标组件中的正文</span><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><br style="background-color: inherit; font-family: 微软雅黑; font-size: 14px;"/><span style="font-family: 微软雅黑; font-size: 14px;">        10重定向</span></div>
</div></body></html> 